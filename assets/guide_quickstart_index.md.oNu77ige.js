import{_ as n,v as e}from"./chunks/framework.CLyb6sNG.js";import"./chunks/theme.CddhzDk7.js";const h=JSON.parse('{"title":"Quick Start","description":"","frontmatter":{},"headers":[],"relativePath":"guide/quickstart/index.md","filePath":"guide/quickstart/index.md"}'),a={name:"guide/quickstart/index.md"};function i(o,s,t,p,l,c){return e.openBlock(),e.createElementBlock("div",null,s[0]||(s[0]=[e.createStaticVNode(`<h1 id="quick-start" tabindex="-1">Quick Start <a class="header-anchor" href="#quick-start" aria-label="Permalink to &quot;Quick Start&quot;">​</a></h1><h2 id="global-installation" tabindex="-1">Global Installation <a class="header-anchor" href="#global-installation" aria-label="Permalink to &quot;Global Installation&quot;">​</a></h2><p>The <code>Semo</code> command-line tool is also a utility that assists engineers with daily development, operations, and debugging. Global installation in your local environment is recommended. For detailed usage instructions, please refer to <a href="https://semo.js.org" target="_blank" rel="noreferrer">here</a>.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ npm i -g @semo/cli</span></span>
<span class="line"><span>$ semo help</span></span>
<span class="line"><span>semo</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Execute a Semo style command file</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Commands:</span></span>
<span class="line"><span>  semo                                Execute a Semo style command file                                        [default]</span></span>
<span class="line"><span>  semo cleanup [type]                 Cleanup internal caches.                                          [aliases: clean]</span></span>
<span class="line"><span>  semo completion                     Generate completion script</span></span>
<span class="line"><span>  semo config &lt;op&gt;                    Manage rc config                                                    [aliases: cfg]</span></span>
<span class="line"><span>  semo create &lt;name&gt; [repo] [branch]  Create a new project from specific repo                               [aliases: c]</span></span>
<span class="line"><span>  semo generate &lt;component&gt;           Generate component sample code                                        [aliases: g]</span></span>
<span class="line"><span>  semo init                           Init basic config file and directories                                [aliases: i]</span></span>
<span class="line"><span>  semo repl                           Play with REPL                                                        [aliases: r]</span></span>
<span class="line"><span>  semo run [plugin]                   Run any plugin command directly</span></span>
<span class="line"><span>  semo status                         Show environment status info                                         [aliases: st]</span></span>
<span class="line"><span>  semo version                        Show version number</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Options:</span></span>
<span class="line"><span>  -h, --help     Show help                                                                                     [boolean]</span></span>
<span class="line"><span>  -v, --version  Show version number                                                                           [boolean]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Examples:</span></span>
<span class="line"><span>  semo run hello-world                                        Run a remote plugin command.</span></span>
<span class="line"><span>  semo run --with project-templates — create PROJECT_NAME -T  Clone project template as a starter.</span></span>
<span class="line"><span>  semo repl --require lodash:_                                Start Semo repl and inject lodash object to _.</span></span>
<span class="line"><span>  semo generate command test                                  Generate command template.</span></span>
<span class="line"><span>  semo clean all                                              Clean all cache files and installed npm packages.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Find more information at https://semo.js.org</span></span></code></pre></div><p>As you can see, there are many built-in commands. However, it&#39;s important to note that these commands are intended for specific use cases. They won&#39;t be very helpful without being combined with plugins or specific business projects. This is because the Semo core development primarily focuses on defining extension specifications. The actual business logic needs to be implemented by you. The role and value of Semo become more apparent only when integrated with specific business logic.</p><h2 id="project-integration" tabindex="-1">Project Integration <a class="header-anchor" href="#project-integration" aria-label="Permalink to &quot;Project Integration&quot;">​</a></h2><p>Semo&#39;s primary use case is adding a command-line mechanism to an existing business project. Without Semo, individual business projects can certainly develop their own command-line tools, but this often involves duplicated effort. Furthermore, solutions implemented by different teams will inevitably vary, leading to increased maintenance costs. In enterprise development, reducing costs directly improves profits.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cd YOUR_PROJECT</span></span>
<span class="line"><span>semo init</span></span></code></pre></div><p>If you only use Semo&#39;s plugin dispatch mechanism, installing <code>@semo/core</code> is not necessary. If you want to use methods from <code>@semo/core</code>, the business project must add <code>@semo/core</code> as a project dependency. Whether to place it in <code>devDependencies</code> or <code>dependencies</code> depends on the actual situation. There are several usage patterns when using <code>@semo/core</code> in a business project:</p><ul><li>The core logic of the business project service depends on <code>@semo/core</code>. This is invasive and must be added to <code>dependencies</code>.</li><li>The core logic of the business project service does not depend on <code>@semo/core</code>, but <code>@semo/core</code> is used to define command lines or scripts, and these scripts need to run in production: This is non-invasive, but since it needs to run in production, it also needs to be added to <code>dependencies</code>.</li><li>The core logic of the business project service does not depend on <code>@semo/core</code>, nor is <code>@semo/core</code> used to define command lines or scripts. It only uses the REPL extension mechanism to place the project&#39;s common classes and functions into the <code>REPL</code> environment to assist development and debugging. This is also non-invasive and does not need to run in production, so it can be placed in <code>devDependencies</code>.</li><li>If the container environment itself does not have <code>Semo</code> installed, you can also add <code>@semo/cli</code> to the project dependencies and then use <code>npx semo</code> to dispatch commands.</li></ul><h3 id="adding-a-project-command" tabindex="-1">Adding a Project Command <a class="header-anchor" href="#adding-a-project-command" aria-label="Permalink to &quot;Adding a Project Command&quot;">​</a></h3><p>Here, consider the future planning of the project&#39;s command-line tools. If there will be many, it&#39;s best to establish a hierarchy. Also, the first-level subcommands include core commands. Placing all our commands at the first level can easily lead to confusion and misuse.</p><p><strong>Define a first-level subcommand</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo generate command test</span></span>
<span class="line"><span>semo test # Execute the command just added</span></span></code></pre></div><p><strong>Define a second-level subcommand</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install semo-plugin-application</span></span>
<span class="line"><span>semo generate command application/test --extend=application</span></span>
<span class="line"><span>semo application test</span></span></code></pre></div><p>To isolate project commands from those defined by the core and plugins, it is recommended to add project commands using the second method above. For complex projects, further hierarchy can be applied. Of course, this creates a problem: the increased memory burden due to the deeper command hierarchy, and having to type many preceding commands to find the one to execute. Therefore, generally, we also need to add a few <code>alias</code> entries to the runtime environment&#39;s <code>bashrc</code> in the project:</p><p><strong>Assuming the production environment is deployed using Docker containers</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// Dockerfile</span></span>
<span class="line"><span>RUN echo &#39;alias semo=&quot;npx semo&quot;&#39; &gt;&gt; /home/node/.bashrc</span></span>
<span class="line"><span>RUN echo &#39;alias app=&quot;npx semo app&quot;&#39; &gt;&gt; /home/node/.bashrc</span></span></code></pre></div><p>The commands above demonstrate how to shorten command length. In actual use, if the command hierarchy is particularly deep, you can define more <code>alias</code> here.</p><h2 id="developing-plugins" tabindex="-1">Developing Plugins <a class="header-anchor" href="#developing-plugins" aria-label="Permalink to &quot;Developing Plugins&quot;">​</a></h2><p>If you are not using <code>Semo</code> within a project, but simply want to quickly implement some script commands to help improve your work efficiency, you can use <code>Semo</code> to get started quickly.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cd ~/.semo/node_modules # Plugins defined in this directory will be loaded globally</span></span>
<span class="line"><span>semo create semo-plugin-xxx --template=plugin # Choose the plugin template</span></span>
<span class="line"><span>cd semo-plugin-xxx</span></span>
<span class="line"><span>semo hi # # There is a default example command inside</span></span>
<span class="line"><span>code . # Start developing with Vscode</span></span>
<span class="line"><span>pnpm watch # Based on \`Typescript\` development, requires real-time compilation</span></span></code></pre></div><p>If you are satisfied with your plugin and want to share it with others, you can directly publish your code to <code>npm</code>.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git remote add origin GIT_REPO_URL</span></span>
<span class="line"><span>git add .</span></span>
<span class="line"><span>git commit -m &#39;init&#39;</span></span>
<span class="line"><span>npm login</span></span>
<span class="line"><span>npm version patch &amp;&amp; npm publish</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Note: <code>Semo</code> does not guarantee isolation between command definitions from different plugins. Therefore, if many plugins are installed, some commands might overwrite others due to naming conflicts. However, this rarely happens in everyday use. For simplicity, no special design has been implemented to prevent this.</p></div><h2 id="installing-plugins-developed-by-others" tabindex="-1">Installing Plugins Developed by Others <a class="header-anchor" href="#installing-plugins-developed-by-others" aria-label="Permalink to &quot;Installing Plugins Developed by Others&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm i -g @semo/cli semo-plugin-xxx</span></span></code></pre></div><p>If someone else&#39;s plugin only defines commands you need, you can install the commands globally. If someone else&#39;s plugin is needed in your business project, it should be placed in the project dependencies.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cd YOUR_PROJECT</span></span>
<span class="line"><span>npm install semo-plugin-xxx</span></span>
<span class="line"><span>pnpm add semo-plugin-xxx // or</span></span></code></pre></div><p>Since a <code>Semo</code> plugin is also an <code>NPM</code> module, we can also define library functions within the plugin to be imported by others in their projects:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lib </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;semo-plugin-xxx&#39;</span></span></code></pre></div><p>Using the hook mechanism provided by <code>Semo</code>, you can also use another style to leverage the business logic support provided by plugins.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">xxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> argv.$core.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invokeHook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;app:component&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>As you can see, in the latter method, there&#39;s no need to explicitly import the package; simply installing it is enough. This method uses directory scanning, which has relatively poor performance and lacks IDE autocompletion support. However, for the command-line scenario, the simple and unified code style can also be beneficial.</p><p>This method is only supported in scenarios where <code>argv</code> is accessible.</p>`,36)]))}const m=n(a,[["render",i]]);export{h as __pageData,m as default};

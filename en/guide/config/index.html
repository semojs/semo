<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuration Management | Semo</title>
    <meta name="description" content="一个命令行工具">
    <meta name="generator" content="VitePress v1.0.1">
    <link rel="preload stylesheet" href="/assets/style.DDGI0ahg.css" as="style">
    
    <script type="module" src="/assets/app.B1vJD3EY.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.lNkrJ0O0.js">
    <link rel="modulepreload" href="/assets/chunks/theme.DwkIfc_w.js">
    <link rel="modulepreload" href="/assets/en_guide_config_index.md.DZt4JFCb.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-f256cfe7><!--[--><!--]--><!--[--><span tabindex="-1" data-v-1388cab5></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-1388cab5> Skip to content </a><!--]--><!----><header class="VPNav" data-v-f256cfe7 data-v-4ef65d33><div class="VPNavBar has-sidebar top" data-v-4ef65d33 data-v-ac85bed4><div class="wrapper" data-v-ac85bed4><div class="container" data-v-ac85bed4><div class="title" data-v-ac85bed4><div class="VPNavBarTitle has-sidebar" data-v-ac85bed4 data-v-f5d5b6dc><a class="title" href="/en/" data-v-f5d5b6dc><!--[--><!--]--><!----><span data-v-f5d5b6dc>Semo</span><!--[--><!--]--></a></div></div><div class="content" data-v-ac85bed4><div class="content-body" data-v-ac85bed4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ac85bed4><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ac85bed4 data-v-d5de0961><span id="main-nav-aria-label" class="visually-hidden" data-v-d5de0961>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en/" tabindex="0" data-v-d5de0961 data-v-c05322d4><!--[--><span data-v-c05322d4>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en/guide/" tabindex="0" data-v-d5de0961 data-v-c05322d4><!--[--><span data-v-c05322d4>Guide</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en/usage/" tabindex="0" data-v-d5de0961 data-v-c05322d4><!--[--><span data-v-c05322d4>Usage</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="http://semo.js.org/typedoc/" target="_blank" rel="noreferrer" tabindex="0" data-v-d5de0961 data-v-c05322d4><!--[--><span data-v-c05322d4>Reference</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-ac85bed4 data-v-e1519fb0 data-v-bea58527><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-bea58527><span class="text" data-v-bea58527><span class="vpi-languages option-icon" data-v-bea58527></span><!----><span class="vpi-chevron-down text-icon" data-v-bea58527></span></span></button><div class="menu" data-v-bea58527><div class="VPMenu" data-v-bea58527 data-v-7e82ccd2><!----><!--[--><!--[--><div class="items" data-v-e1519fb0><p class="title" data-v-e1519fb0>English</p><!--[--><div class="VPMenuLink" data-v-e1519fb0 data-v-cc547fe2><a class="VPLink link" href="/guide/config/" data-v-cc547fe2><!--[-->中文<!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-ac85bed4 data-v-91fd8ff9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-91fd8ff9 data-v-15f75e8c data-v-2ecde96b><span class="check" data-v-2ecde96b><span class="icon" data-v-2ecde96b><!--[--><span class="vpi-sun sun" data-v-15f75e8c></span><span class="vpi-moon moon" data-v-15f75e8c></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-ac85bed4 data-v-b6340988 data-v-bea58527><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bea58527><span class="vpi-more-horizontal icon" data-v-bea58527></span></button><div class="menu" data-v-bea58527><div class="VPMenu" data-v-bea58527 data-v-7e82ccd2><!----><!--[--><!--[--><div class="group translations" data-v-b6340988><p class="trans-title" data-v-b6340988>English</p><!--[--><div class="VPMenuLink" data-v-b6340988 data-v-cc547fe2><a class="VPLink link" href="/guide/config/" data-v-cc547fe2><!--[-->中文<!--]--></a></div><!--]--></div><div class="group" data-v-b6340988><div class="item appearance" data-v-b6340988><p class="label" data-v-b6340988>Appearance</p><div class="appearance-action" data-v-b6340988><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-b6340988 data-v-15f75e8c data-v-2ecde96b><span class="check" data-v-2ecde96b><span class="icon" data-v-2ecde96b><!--[--><span class="vpi-sun sun" data-v-15f75e8c></span><span class="vpi-moon moon" data-v-15f75e8c></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ac85bed4 data-v-80307887><span class="container" data-v-80307887><span class="top" data-v-80307887></span><span class="middle" data-v-80307887></span><span class="bottom" data-v-80307887></span></span></button></div></div></div></div><div class="divider" data-v-ac85bed4><div class="divider-line" data-v-ac85bed4></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-f256cfe7 data-v-bbe87977><div class="container" data-v-bbe87977><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-bbe87977><span class="vpi-align-left menu-icon" data-v-bbe87977></span><span class="menu-text" data-v-bbe87977>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-bbe87977 data-v-f968625d><button data-v-f968625d>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-f256cfe7 data-v-dc12fb7d><div class="curtain" data-v-dc12fb7d></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-dc12fb7d><span class="visually-hidden" id="sidebar-aria-label" data-v-dc12fb7d> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-dc12fb7d><section class="VPSidebarItem level-0 collapsible has-active" data-v-dc12fb7d data-v-488ae0df><div class="item" role="button" tabindex="0" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><h2 class="text" data-v-488ae0df>Guide</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-488ae0df><span class="vpi-chevron-right caret-icon" data-v-488ae0df></span></div></div><div class="items" data-v-488ae0df><!--[--><div class="VPSidebarItem level-1 is-link" data-v-488ae0df data-v-488ae0df><div class="item" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><a class="VPLink link link" href="/en/guide/" data-v-488ae0df><!--[--><p class="text" data-v-488ae0df>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-488ae0df data-v-488ae0df><div class="item" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><a class="VPLink link link" href="/en/guide/quickstart/" data-v-488ae0df><!--[--><p class="text" data-v-488ae0df>Quick Start</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-488ae0df data-v-488ae0df><div class="item" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><a class="VPLink link link" href="/en/guide/core-commands/" data-v-488ae0df><!--[--><p class="text" data-v-488ae0df>Core Commands</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-488ae0df data-v-488ae0df><div class="item" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><a class="VPLink link link" href="/en/guide/core-commands/" data-v-488ae0df><!--[--><p class="text" data-v-488ae0df>Custom Commands</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-488ae0df data-v-488ae0df><div class="item" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><a class="VPLink link link" href="/en/guide/config/" data-v-488ae0df><!--[--><p class="text" data-v-488ae0df>Configuration Management</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-488ae0df data-v-488ae0df><div class="item" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><a class="VPLink link link" href="/en/guide/hook/" data-v-488ae0df><!--[--><p class="text" data-v-488ae0df>Hook Mechanism</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-488ae0df data-v-488ae0df><div class="item" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><a class="VPLink link link" href="/en/guide/plugin/" data-v-488ae0df><!--[--><p class="text" data-v-488ae0df>Plugin Development</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-dc12fb7d><section class="VPSidebarItem level-0 collapsible" data-v-dc12fb7d data-v-488ae0df><div class="item" role="button" tabindex="0" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><h2 class="text" data-v-488ae0df>Usage</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-488ae0df><span class="vpi-chevron-right caret-icon" data-v-488ae0df></span></div></div><div class="items" data-v-488ae0df><!--[--><div class="VPSidebarItem level-1 is-link" data-v-488ae0df data-v-488ae0df><div class="item" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><a class="VPLink link link" href="/en/usage/" data-v-488ae0df><!--[--><p class="text" data-v-488ae0df>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-488ae0df data-v-488ae0df><div class="item" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><a class="VPLink link link" href="/en/usage/plugin/" data-v-488ae0df><!--[--><p class="text" data-v-488ae0df>Plugins</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-488ae0df data-v-488ae0df><div class="item" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><a class="VPLink link link" href="/en/usage/integration/" data-v-488ae0df><!--[--><p class="text" data-v-488ae0df>Project Integration</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-488ae0df data-v-488ae0df><div class="item" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><a class="VPLink link link" href="/en/usage/solution/" data-v-488ae0df><!--[--><p class="text" data-v-488ae0df>Solutions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-488ae0df data-v-488ae0df><div class="item" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><a class="VPLink link link" href="/en/usage/distribution/" data-v-488ae0df><!--[--><p class="text" data-v-488ae0df>Distribution</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-dc12fb7d><section class="VPSidebarItem level-0 collapsible" data-v-dc12fb7d data-v-488ae0df><div class="item" role="button" tabindex="0" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><h2 class="text" data-v-488ae0df>Community</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-488ae0df><span class="vpi-chevron-right caret-icon" data-v-488ae0df></span></div></div><div class="items" data-v-488ae0df><!--[--><div class="VPSidebarItem level-1 is-link" data-v-488ae0df data-v-488ae0df><div class="item" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><a class="VPLink link link" href="/en/community/contrib/" data-v-488ae0df><!--[--><p class="text" data-v-488ae0df>How to Contribute</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-488ae0df data-v-488ae0df><div class="item" data-v-488ae0df><div class="indicator" data-v-488ae0df></div><a class="VPLink link link" href="/en/community/qa/" data-v-488ae0df><!--[--><p class="text" data-v-488ae0df>Frequently Asked Questions</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-f256cfe7 data-v-28838427><div class="VPDoc has-sidebar has-aside" data-v-28838427 data-v-7d6db67d><!--[--><!--]--><div class="container" data-v-7d6db67d><div class="aside" data-v-7d6db67d><div class="aside-curtain" data-v-7d6db67d></div><div class="aside-container" data-v-7d6db67d><div class="aside-content" data-v-7d6db67d><div class="VPDocAside" data-v-7d6db67d data-v-9dba966e><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-9dba966e data-v-47951d79><div class="content" data-v-47951d79><div class="outline-marker" data-v-47951d79></div><div class="outline-title" role="heading" aria-level="2" data-v-47951d79>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-47951d79><span class="visually-hidden" id="doc-outline-aria-label" data-v-47951d79> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-47951d79 data-v-6eaad72e><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-9dba966e></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-7d6db67d><div class="content-container" data-v-7d6db67d><!--[--><!--]--><main class="main" data-v-7d6db67d><div style="position:relative;" class="vp-doc _en_guide_config_" data-v-7d6db67d><div><h1 id="configuration-management" tabindex="-1">Configuration Management <a class="header-anchor" href="#configuration-management" aria-label="Permalink to &quot;Configuration Management&quot;">​</a></h1><p>A core concept of <code>Semo</code> is configuration. We can intervene in the configuration of <code>Semo</code> in multiple ways to influence the behavior of both the core and plugins.</p><h2 id="global-configuration" tabindex="-1">Global Configuration <a class="header-anchor" href="#global-configuration" aria-label="Permalink to &quot;Global Configuration&quot;">​</a></h2><p>There is a global <code>Semo</code> directory in the home directory, containing a configuration file that will take effect globally under the current account, located at <code>~/.semo/.semorc.yml</code>.</p><p>This global configuration can adjust default values for some commands, allowing options to be omitted when using commands each time, for example:</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">$plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  semo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      repo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">REPO_URL</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      branch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">master</span></span></code></pre></div><p>This means that the <code>semo create</code> command, which initializes a project based on a template project, would originally be written as follows:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>semo create PROJECT_NAME PROJECT_REPO_URL master -f</span></span></code></pre></div><p>However, with default configuration, we can omit two parameters and write:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>semo create PROJECT_NAME -f</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You can see that the configuration is placed under the <code>commandDefault</code> key. This is because if it&#39;s configured at the top level, it will affect all commands. If this is desired behavior, it can be placed at the top level. Otherwise, it can be placed under <code>commandDefault</code> to only affect a single command.</p></div><p>We often use global configuration, especially for some functional commands. If we find ourselves needing to pass certain parameters every time, we can fix them through global configuration. For example:</p><p>When executing the <code>semo repl</code> command, there is a <code>--hook</code> parameter. If passed, it will call <code>hook_repl</code> to inject some business logic. However, the default for the core is <code>--hook=false</code>, which starts a bit faster, but later it was found that in the business scenario, <code>--hook=true</code> was needed every time. In this case, we can add this configuration to the global configuration.</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">commandDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  repl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    hook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p>Now, when executing the <code>repl</code> command, business logic will be injected by default.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>semo repl</span></span></code></pre></div><h2 id="plugin-configuration" tabindex="-1">Plugin Configuration <a class="header-anchor" href="#plugin-configuration" aria-label="Permalink to &quot;Plugin Configuration&quot;">​</a></h2><p>There is also a <code>.semorc.yml</code> file under the plugin directory, with similar configuration file names and principles, but with fewer configurations that actually take effect. By default, only three are generated:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">commandDir: src/commands</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">extendDir: src/extends</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hookDir: src/hooks</span></span></code></pre></div><p>As the project evolves, more configurations that can take effect here may be added. Currently, these three control the command directory, plugin extension command directory, and hook directory during plugin development.</p><p>In addition to the commonly used plugin configurations mentioned above, plugins sometimes expose some configuration options externally. These configuration lines generally agree to be retrieved from both the root and the namespace of the plugin name.</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">semo-plugin-xxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bar</span></span></code></pre></div><p>The effectiveness of this configuration depends on the plugin&#39;s own implementation trying to retrieve it actively.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> foo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Utils._.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(argv, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;semo-plugin-xxx.foo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, argv.foo)</span></span></code></pre></div><p>This provides an opportunity for plugins to flexibly agree on exclusive parameters internally. If a plugin uses too many top-level configuration parameters internally, it is likely to conflict with parameters from other plugins. This style of configuration agreement is a supplement to configurations like <code>commandDefault</code>. The focus of plugin configuration is configuration, while <code>commandDefault</code> is the override order from the perspective of command parameters. The former is actively obtained, while the latter can be automatically recognized. The specific plugin should clearly indicate which method it uses.</p><h2 id="project-configuration" tabindex="-1">Project Configuration <a class="header-anchor" href="#project-configuration" aria-label="Permalink to &quot;Project Configuration&quot;">​</a></h2><p>When we integrate <code>Semo</code> into a project, the project also has command directories, plugin extension command directories, and hook directories, but there are more, such as plugin directories and script directories:</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">commandDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bin/semo/commands</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">pluginDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bin/semo/plugins</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">extendDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bin/semo/extends</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scriptDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bin/semo/scripts</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hookDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bin/semo/hooks</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The reason there is no plugin directory in the plugin is because we do not support the nested declaration of plugins in plugins, but we support defining plugins in projects.</p></div><p>In addition to configuring some directories, we can also configure some options to override commands, such as the <code>repl</code> command option override mentioned above:</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p>For example, the <code>semo init</code> command has an <code>--typescript</code> option. If this option is added to initialize the directory structure, there will also be a corresponding override configuration in the project configuration. This way, when executing the <code>semo generate</code> command, many code generation commands that support both <code>js</code> and <code>ts</code> versions will be automatically generated as <code>typescript</code> style.</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">typescript: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p>Options configured in the project configuration only take effect in the current project directory. This is just a demonstration of usage. In fact, we can provide multiple options when developing plugins, and limit behaviors when using plugins in projects to support flexibility and personalization.</p><h2 id="hidden-configuration" tabindex="-1">Hidden Configuration <a class="header-anchor" href="#hidden-configuration" aria-label="Permalink to &quot;Hidden Configuration&quot;">​</a></h2><p><code>Semo</code> has some hidden options that are rarely used in ordinary times, which can be viewed by <code>semo help --show-hidden</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>Options:</span></span>
<span class="line"><span>  --script-name                                       Rename script name.                    [string] [default: &quot;semo&quot;]</span></span>
<span class="line"><span>  --plugin-prefix                                     Set plugin prefix.                              [default: &quot;semo&quot;]</span></span>
<span class="line"><span>  --disable-core-command, --disable-core              Disable core commands.</span></span>
<span class="line"><span>  --disable-completion-command, --disable-completion  Disable completion command.</span></span>
<span class="line"><span>  --hide-completion-command, --hide-completion        Hide completion command.</span></span>
<span class="line"><span>  --disable-global-plugin, --disable-global-plugins   Disable global plugins.</span></span>
<span class="line"><span>  --disable-home-plugin, --disable-home-plugins       Disable home plugins.</span></span>
<span class="line"><span>  --hide-epilog                                       Hide epilog.</span></span>
<span class="line"><span>  --set-epilog                                        Set epilog.                                        [default: false]</span></span>
<span class="line"><span>  --set-version                                       Set version.</span></span>
<span class="line"><span>  --node-env-key, --node-env                          Set node env key                              [default: &quot;NODE_ENV&quot;]</span></span></code></pre></div><p>As seen, by passing these options, we can change some core behaviors, and even change our own command names and versions. Here, two of them are emphasized:</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">--disable-global-plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">--disable-home-plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p>We generally add these two configurations in project configuration, so that when scanning plugins and hooks, only the current project directory is scanned, which can slightly improve command performance.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>In the Semo configuration environment, the following configurations are completely equivalent --foo-bar --foo--bar --fooBar foo-bar fooBar</p></div><h2 id="modifying-configuration-via-command-line" tabindex="-1">Modifying Configuration via Command Line <a class="header-anchor" href="#modifying-configuration-via-command-line" aria-label="Permalink to &quot;Modifying Configuration via Command Line&quot;">​</a></h2><p>Of course, we can modify the configuration by editing the configuration file, but Semo also provides a command line tool to edit the configuration. With this command line tool, we can customize certain configurations through scripts.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>semo config set a.b.c d &#39;some comment&#39; -g</span></span>
<span class="line"><span>semo config get a.b.c</span></span>
<span class="line"><span>semo config del a.b.c</span></span>
<span class="line"><span>semo config list</span></span>
<span class="line"><span>semo config list --watch</span></span></code></pre></div><h2 id="application-environment-configuration" tabindex="-1">Application Environment Configuration <a class="header-anchor" href="#application-environment-configuration" aria-label="Permalink to &quot;Application Environment Configuration&quot;">​</a></h2><blockquote><p>This feature was introduced in <code>v0.8.0</code></p></blockquote><p>In the application directory (usually the current directory where the semo command is run), we organize our project code using Semo&#39;s mechanism, such as command line tools, scheduled tasks, hook extensions, command extensions, scripts, etc. Previously, the system could only recognize the <code>.semorc.yml</code> configuration file, but the latest version can continue to load an environment configuration. For example, if the current <code>NODE_ENV=development</code> (default value), then <code>.semorc.development.yml</code> will also be recognized and loaded, and will override configurations with the same name in the main configuration (using Lodash&#39;s <code>_.merge</code>).</p><h2 id="special-configuration-items" tabindex="-1">Special Configuration Items <a class="header-anchor" href="#special-configuration-items" aria-label="Permalink to &quot;Special Configuration Items&quot;">​</a></h2><blockquote><p>This feature was introduced in <code>v0.9.0</code></p></blockquote><p>Semo&#39;s configuration and command line <code>argv</code> are closely coupled. The original intention of <code>argv</code> was only to store command line parameters. Semo further expands its capabilities, hoping it can take on the responsibility of project configuration management. Here, several configurations starting with <code>$</code> have special meanings:</p><h3 id="plugin" tabindex="-1"><code>$plugin</code> <a class="header-anchor" href="#plugin" aria-label="Permalink to &quot;`$plugin`&quot;">​</a></h3><p>This configuration defines plugin-level configuration items. Previously, commands could only agree on configurations through parameters, but there are some complex configurations that do not need to be declared as parameters. Therefore, this configuration item was designed:</p><p>Taking <code>$plugin.ssh.key = 1</code> as an example, it means that each command under the <code>semo-plugin-ssh</code> plugin is provided with a configuration <code>key=1</code>. Where does this configuration go? Semo has already helped assemble it into <code>argv.$config</code>, so you can retrieve <code>argv.$config</code> under the command of the ssh plugin, and all configurations obtained are under <code>$plugin.ssh</code>.</p><p>To achieve this, each command adds a declaration like <code>export const plugin = &#39;ssh&#39;</code> when declared.</p><h3 id="plugins" tabindex="-1"><code>$plugins</code> <a class="header-anchor" href="#plugins" aria-label="Permalink to &quot;`$plugins`&quot;">​</a></h3><p>The <code>$plugin</code> mentioned above adds configurations for each specific plugin, while this one determines the effective plugins for the entire environment, supporting three configurations:</p><ul><li><code>$plugins.register</code> determines whether to enable the active registration mechanism. If enabled, the automatic scanning mechanism is disabled. Refer to <a href="./../plugin/README.html">Active Registration Mechanism for Plugins</a>.</li><li><code>$plugins.include</code> performs secondary filtering on registered plugins. This is a whitelist and is an array that supports shorthand notation for plugin names.</li><li><code>$plugins.exclude</code> performs secondary filtering on registered plugins. This is a blacklist and is an array that supports shorthand notation for plugin names.</li></ul><h3 id="config" tabindex="-1"><code>$config</code> <a class="header-anchor" href="#config" aria-label="Permalink to &quot;`$config`&quot;">​</a></h3><p>Automatically parsed plugin configurations. Generally, this is only needed during plugin development. If it is an application, it is recommended to use <code>$app</code> to manage configurations.</p><h3 id="app-or-application" tabindex="-1"><code>$app</code> or <code>$application</code> <a class="header-anchor" href="#app-or-application" aria-label="Permalink to &quot;`$app` or `$application`&quot;">​</a></h3><p>There is no special function here. It is only suggested that the application&#39;s own configuration be grouped together to prevent confusion with command line options. For example:</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">$app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1234</span></span></code></pre></div><h3 id="input" tabindex="-1"><code>$input</code> <a class="header-anchor" href="#input" aria-label="Permalink to &quot;`$input`&quot;">​</a></h3><p>The purpose of this is when implementing commands that support piping, <code>$input</code> can automatically receive the output of previous commands, regardless of whether it is the output of Semo plugins, but the format of the output is uncertain and needs to be verified and constrained by the current command itself.</p><h3 id="_0" tabindex="-1"><code>$0</code> <a class="header-anchor" href="#_0" aria-label="Permalink to &quot;`$0`&quot;">​</a></h3><p>This is built into <code>yargs</code>, indicating the name of the current script being run.</p><h3 id="command" tabindex="-1"><code>$command</code> <a class="header-anchor" href="#command" aria-label="Permalink to &quot;`$command`&quot;">​</a></h3><p>This contains information about the current command. Generally, its usefulness is not very significant.</p><h3 id="semo" tabindex="-1"><code>$semo</code> <a class="header-anchor" href="#semo" aria-label="Permalink to &quot;`$semo`&quot;">​</a></h3><p>This contains a reference to the utility function library <code>Utils</code>. The main reason for using this is that sometimes plugins also want to know and process internal information. However, if a plugin depends on and imports <code>@semo/core</code> internally, due to different positions, it actually occupies two separate memories, and the imported part is missing necessary information due to lack of initialization. By using <code>argv.$semo.Utils.getInternalCache().get(&#39;argv&#39;)</code>, you can correctly obtain the runtime data.</p><h2 id="built-in-configuration-management-methods" tabindex="-1">Built-in Configuration Management Methods <a class="header-anchor" href="#built-in-configuration-management-methods" aria-label="Permalink to &quot;Built-in Configuration Management Methods&quot;">​</a></h2><h3 id="utils-extendconfig" tabindex="-1"><code>Utils.extendConfig</code> <a class="header-anchor" href="#utils-extendconfig" aria-label="Permalink to &quot;`Utils.extendConfig`&quot;">​</a></h3><p>This method supports extending a new configuration file, which allows for configuration file groups without putting all configurations in <code>.semorc.yml</code>, while also supporting environment configurations. For example:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Utils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">extendConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;application.yml&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>application.yml</span></span>
<span class="line"><span>application.development.yml</span></span>
<span class="line"><span>application.production.yml</span></span></code></pre></div><h3 id="utils-config" tabindex="-1"><code>Utils.config</code> <a class="header-anchor" href="#utils-config" aria-label="Permalink to &quot;`Utils.config`&quot;">​</a></h3><p>This method is used to extract a section of the total configuration, with all sections extracted by default, based on Lodash&#39;s <code>_.get</code> method.</p><h3 id="utils-pluginconfig" tabindex="-1"><code>Utils.pluginConfig</code> <a class="header-anchor" href="#utils-pluginconfig" aria-label="Permalink to &quot;`Utils.pluginConfig`&quot;">​</a></h3><p>This method is used to extract plugin configurations and only works in the <code>handler</code> of commands. By default, it still takes precedence over command line parameters, but if the command line parameters are not specified and there is no default value, plugin-level configurations can be obtained.</p><h2 id="setting-environment-variables-env" tabindex="-1">Setting Environment Variables <code>.env</code> <a class="header-anchor" href="#setting-environment-variables-env" aria-label="Permalink to &quot;Setting Environment Variables `.env`&quot;">​</a></h2><p>By integrating <code>dotenv</code>, we have introduced support for the <code>.env</code> file, which is enabled by default for command line tools. For programs, you need to enable it manually.</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Utils } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@semo/core&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Utils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useDotEnv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-7d6db67d data-v-e897da19><!--[--><!--]--><!----><nav class="prev-next" data-v-e897da19><div class="pager" data-v-e897da19><a class="VPLink link pager-link prev" href="/en/guide/core-commands/" data-v-e897da19><!--[--><span class="desc" data-v-e897da19>Previous page</span><span class="title" data-v-e897da19>Core Commands</span><!--]--></a></div><div class="pager" data-v-e897da19><a class="VPLink link pager-link next" href="/en/guide/hook/" data-v-e897da19><!--[--><span class="desc" data-v-e897da19>Next page</span><span class="title" data-v-e897da19>Hook Mechanism</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-f256cfe7 data-v-87fcd295><div class="container" data-v-87fcd295><p class="message" data-v-87fcd295>Enterprise level CLI rules</p><!----></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"usage_integration_index.md\":\"Cj4SnglT\",\"guide_quickstart_index.md\":\"7-6Bgj2m\",\"community_contrib_index.md\":\"CtvVzEvb\",\"usage_plugin_index.md\":\"BKhimYA-\",\"en_usage_distribution_index.md\":\"cfy8vRDw\",\"en_usage_integration_index.md\":\"Bl4E2bY2\",\"community_qa_index.md\":\"SWeKNcwT\",\"en_usage_solution_index.md\":\"DuxNaiZK\",\"guide_config_index.md\":\"BpZS8B5D\",\"guide_index.md\":\"DVWdzf9f\",\"en_usage_plugin_index.md\":\"DSGnmMuo\",\"guide_plugin_index.md\":\"BSKLl3gL\",\"guide_core-commands_index.md\":\"CtgEKNNh\",\"en_community_qa_index.md\":\"l_gsh5C-\",\"usage_solution_index.md\":\"6j5aLfAD\",\"en_guide_custom-commands_index.md\":\"C67gE2vA\",\"en_community_contrib_index.md\":\"TdLD_-yU\",\"en_guide_config_index.md\":\"DZt4JFCb\",\"en_guide_quickstart_index.md\":\"dXFHpsz0\",\"en_guide_hook_index.md\":\"Cr-w4S3e\",\"usage_index.md\":\"CnmAnBB5\",\"guide_custom-commands_index.md\":\"KkbzBT9L\",\"en_guide_core-commands_index.md\":\"CrGsdGAu\",\"en_guide_plugin_index.md\":\"CtIupq0k\",\"guide_hook_index.md\":\"DpGXOfl2\",\"usage_distribution_index.md\":\"BbD8snNm\",\"en_index.md\":\"BnILzXBU\",\"en_usage_index.md\":\"C3xTY4-R\",\"index.md\":\"DLwpwl_J\",\"en_guide_index.md\":\"CyQEUqjN\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Semo\",\"description\":\"一个命令行工具\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"search\":{\"provider\":\"local\"}},\"locales\":{\"root\":{\"label\":\"中文\",\"lang\":\"zh\",\"link\":\"/\",\"themeConfig\":{\"footer\":{\"message\":\"企业级Node项目命令行体系建设规范\"},\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"指南\",\"link\":\"/guide/\"},{\"text\":\"用法\",\"link\":\"/usage/\"},{\"text\":\"参考\",\"link\":\"http://semo.js.org/typedoc/\"}],\"sidebar\":[{\"text\":\"基础\",\"collapsed\":false,\"items\":[{\"text\":\"介绍\",\"link\":\"/guide/\"},{\"text\":\"快速上手\",\"link\":\"/guide/quickstart/\"},{\"text\":\"核心命令\",\"link\":\"/guide/core-commands/\"},{\"text\":\"自定义命令\",\"link\":\"/guide/custom-commands/\"},{\"text\":\"配置管理\",\"link\":\"/guide/config/\"},{\"text\":\"钩子机制\",\"link\":\"/guide/hook/\"},{\"text\":\"插件开发\",\"link\":\"/guide/plugin/\"}]},{\"text\":\"用法\",\"collapsed\":false,\"items\":[{\"text\":\"概述\",\"link\":\"/usage/\"},{\"text\":\"插件\",\"link\":\"/usage/plugin/\"},{\"text\":\"项目整合\",\"link\":\"/usage/integration/\"},{\"text\":\"解决方案\",\"link\":\"/usage/solution/\"},{\"text\":\"发行版\",\"link\":\"/usage/distribution/\"}]},{\"text\":\"社区\",\"collapsed\":false,\"items\":[{\"text\":\"如何贡献\",\"link\":\"/community/contrib/\"},{\"text\":\"常见问题\",\"link\":\"/community/qa/\"}]}]}},\"en\":{\"label\":\"English\",\"lang\":\"en\",\"link\":\"/en/\",\"themeConfig\":{\"footer\":{\"message\":\"Enterprise level CLI rules\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/en/\"},{\"text\":\"Guide\",\"link\":\"/en/guide/\"},{\"text\":\"Usage\",\"link\":\"/en/usage/\"},{\"text\":\"Reference\",\"link\":\"http://semo.js.org/typedoc/\"}],\"sidebar\":[{\"text\":\"Guide\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/en/guide/\"},{\"text\":\"Quick Start\",\"link\":\"/en/guide/quickstart/\"},{\"text\":\"Core Commands\",\"link\":\"/en/guide/core-commands/\"},{\"text\":\"Custom Commands\",\"link\":\"/en/guide/core-commands/\"},{\"text\":\"Configuration Management\",\"link\":\"/en/guide/config/\"},{\"text\":\"Hook Mechanism\",\"link\":\"/en/guide/hook/\"},{\"text\":\"Plugin Development\",\"link\":\"/en/guide/plugin/\"}]},{\"text\":\"Usage\",\"collapsed\":false,\"items\":[{\"text\":\"Overview\",\"link\":\"/en/usage/\"},{\"text\":\"Plugins\",\"link\":\"/en/usage/plugin/\"},{\"text\":\"Project Integration\",\"link\":\"/en/usage/integration/\"},{\"text\":\"Solutions\",\"link\":\"/en/usage/solution/\"},{\"text\":\"Distribution\",\"link\":\"/en/usage/distribution/\"}]},{\"text\":\"Community\",\"collapsed\":false,\"items\":[{\"text\":\"How to Contribute\",\"link\":\"/en/community/contrib/\"},{\"text\":\"Frequently Asked Questions\",\"link\":\"/en/community/qa/\"}]}]}}},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>
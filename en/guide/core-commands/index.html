<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Core Commands | Semo</title>
    <meta name="description" content="一个命令行工具">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.pPpfxpy6.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.C2Zll7qT.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.C7eXMWNj.js">
    <link rel="modulepreload" href="/assets/chunks/framework.BO--qlR8.js">
    <link rel="modulepreload" href="/assets/en_guide_core-commands_index.md.BLp7JC1y.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-32f6a11a><!--[--><!--]--><!--[--><span tabindex="-1" data-v-7aa664e1></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-7aa664e1>Skip to content</a><!--]--><!----><header class="VPNav" data-v-32f6a11a data-v-8e19932b><div class="VPNavBar" data-v-8e19932b data-v-716a1440><div class="wrapper" data-v-716a1440><div class="container" data-v-716a1440><div class="title" data-v-716a1440><div class="VPNavBarTitle has-sidebar" data-v-716a1440 data-v-6f43652a><a class="title" href="/en/" data-v-6f43652a><!--[--><!--]--><!----><span data-v-6f43652a>Semo</span><!--[--><!--]--></a></div></div><div class="content" data-v-716a1440><div class="content-body" data-v-716a1440><!--[--><!--]--><div class="VPNavBarSearch search" data-v-716a1440><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-716a1440 data-v-e4b823fb><span id="main-nav-aria-label" class="visually-hidden" data-v-e4b823fb> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en/" tabindex="0" data-v-e4b823fb data-v-f58e9332><!--[--><span data-v-f58e9332>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en/guide/" tabindex="0" data-v-e4b823fb data-v-f58e9332><!--[--><span data-v-f58e9332>Guide</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en/usage/" tabindex="0" data-v-e4b823fb data-v-f58e9332><!--[--><span data-v-f58e9332>Usage</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="http://semo.js.org/typedoc/" target="_blank" rel="noreferrer" tabindex="0" data-v-e4b823fb data-v-f58e9332><!--[--><span data-v-f58e9332>Reference</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-716a1440 data-v-2f847458 data-v-4b83c3e8><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-4b83c3e8><span class="text" data-v-4b83c3e8><span class="vpi-languages option-icon" data-v-4b83c3e8></span><!----><span class="vpi-chevron-down text-icon" data-v-4b83c3e8></span></span></button><div class="menu" data-v-4b83c3e8><div class="VPMenu" data-v-4b83c3e8 data-v-354710f4><!----><!--[--><!--[--><div class="items" data-v-2f847458><p class="title" data-v-2f847458>English</p><!--[--><div class="VPMenuLink" data-v-2f847458 data-v-8f2a620c><a class="VPLink link" href="/guide/core-commands/" data-v-8f2a620c><!--[--><span data-v-8f2a620c>中文</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-716a1440 data-v-15e2e071><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-15e2e071 data-v-0849e505 data-v-7b294bfe><span class="check" data-v-7b294bfe><span class="icon" data-v-7b294bfe><!--[--><span class="vpi-sun sun" data-v-0849e505></span><span class="vpi-moon moon" data-v-0849e505></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-716a1440 data-v-b754ac10 data-v-4b83c3e8><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-4b83c3e8><span class="vpi-more-horizontal icon" data-v-4b83c3e8></span></button><div class="menu" data-v-4b83c3e8><div class="VPMenu" data-v-4b83c3e8 data-v-354710f4><!----><!--[--><!--[--><div class="group translations" data-v-b754ac10><p class="trans-title" data-v-b754ac10>English</p><!--[--><div class="VPMenuLink" data-v-b754ac10 data-v-8f2a620c><a class="VPLink link" href="/guide/core-commands/" data-v-8f2a620c><!--[--><span data-v-8f2a620c>中文</span><!--]--></a></div><!--]--></div><div class="group" data-v-b754ac10><div class="item appearance" data-v-b754ac10><p class="label" data-v-b754ac10>Appearance</p><div class="appearance-action" data-v-b754ac10><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-b754ac10 data-v-0849e505 data-v-7b294bfe><span class="check" data-v-7b294bfe><span class="icon" data-v-7b294bfe><!--[--><span class="vpi-sun sun" data-v-0849e505></span><span class="vpi-moon moon" data-v-0849e505></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-716a1440 data-v-763deb14><span class="container" data-v-763deb14><span class="top" data-v-763deb14></span><span class="middle" data-v-763deb14></span><span class="bottom" data-v-763deb14></span></span></button></div></div></div></div><div class="divider" data-v-716a1440><div class="divider-line" data-v-716a1440></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-32f6a11a data-v-af51e573><div class="container" data-v-af51e573><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-af51e573><span class="vpi-align-left menu-icon" data-v-af51e573></span><span class="menu-text" data-v-af51e573>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-af51e573 data-v-f3d2de30><button data-v-f3d2de30>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-32f6a11a data-v-00b077eb><div class="curtain" data-v-00b077eb></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-00b077eb><span class="visually-hidden" id="sidebar-aria-label" data-v-00b077eb> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-78e97467><section class="VPSidebarItem level-0 collapsible has-active" data-v-78e97467 data-v-d5b912d8><div class="item" role="button" tabindex="0" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><h2 class="text" data-v-d5b912d8>Guide</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d5b912d8><span class="vpi-chevron-right caret-icon" data-v-d5b912d8></span></div></div><div class="items" data-v-d5b912d8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d5b912d8 data-v-d5b912d8><div class="item" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><a class="VPLink link link" href="/en/guide/" data-v-d5b912d8><!--[--><p class="text" data-v-d5b912d8>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d5b912d8 data-v-d5b912d8><div class="item" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><a class="VPLink link link" href="/en/guide/quickstart/" data-v-d5b912d8><!--[--><p class="text" data-v-d5b912d8>Quick Start</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d5b912d8 data-v-d5b912d8><div class="item" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><a class="VPLink link link" href="/en/guide/core-commands/" data-v-d5b912d8><!--[--><p class="text" data-v-d5b912d8>Core Commands</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d5b912d8 data-v-d5b912d8><div class="item" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><a class="VPLink link link" href="/en/guide/core-commands/" data-v-d5b912d8><!--[--><p class="text" data-v-d5b912d8>Custom Commands</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d5b912d8 data-v-d5b912d8><div class="item" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><a class="VPLink link link" href="/en/guide/config/" data-v-d5b912d8><!--[--><p class="text" data-v-d5b912d8>Configuration Management</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d5b912d8 data-v-d5b912d8><div class="item" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><a class="VPLink link link" href="/en/guide/hook/" data-v-d5b912d8><!--[--><p class="text" data-v-d5b912d8>Hook Mechanism</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d5b912d8 data-v-d5b912d8><div class="item" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><a class="VPLink link link" href="/en/guide/plugin/" data-v-d5b912d8><!--[--><p class="text" data-v-d5b912d8>Plugin Development</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-78e97467><section class="VPSidebarItem level-0 collapsible" data-v-78e97467 data-v-d5b912d8><div class="item" role="button" tabindex="0" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><h2 class="text" data-v-d5b912d8>Usage</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d5b912d8><span class="vpi-chevron-right caret-icon" data-v-d5b912d8></span></div></div><div class="items" data-v-d5b912d8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d5b912d8 data-v-d5b912d8><div class="item" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><a class="VPLink link link" href="/en/usage/" data-v-d5b912d8><!--[--><p class="text" data-v-d5b912d8>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d5b912d8 data-v-d5b912d8><div class="item" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><a class="VPLink link link" href="/en/usage/plugin/" data-v-d5b912d8><!--[--><p class="text" data-v-d5b912d8>Plugins</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d5b912d8 data-v-d5b912d8><div class="item" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><a class="VPLink link link" href="/en/usage/integration/" data-v-d5b912d8><!--[--><p class="text" data-v-d5b912d8>Project Integration</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d5b912d8 data-v-d5b912d8><div class="item" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><a class="VPLink link link" href="/en/usage/solution/" data-v-d5b912d8><!--[--><p class="text" data-v-d5b912d8>Solutions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d5b912d8 data-v-d5b912d8><div class="item" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><a class="VPLink link link" href="/en/usage/distribution/" data-v-d5b912d8><!--[--><p class="text" data-v-d5b912d8>Distribution</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-78e97467><section class="VPSidebarItem level-0 collapsible" data-v-78e97467 data-v-d5b912d8><div class="item" role="button" tabindex="0" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><h2 class="text" data-v-d5b912d8>Community</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d5b912d8><span class="vpi-chevron-right caret-icon" data-v-d5b912d8></span></div></div><div class="items" data-v-d5b912d8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d5b912d8 data-v-d5b912d8><div class="item" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><a class="VPLink link link" href="/en/community/contrib/" data-v-d5b912d8><!--[--><p class="text" data-v-d5b912d8>How to Contribute</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d5b912d8 data-v-d5b912d8><div class="item" data-v-d5b912d8><div class="indicator" data-v-d5b912d8></div><a class="VPLink link link" href="/en/community/qa/" data-v-d5b912d8><!--[--><p class="text" data-v-d5b912d8>Frequently Asked Questions</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-32f6a11a data-v-4602a5a1><div class="VPDoc has-sidebar has-aside" data-v-4602a5a1 data-v-022997c1><!--[--><!--]--><div class="container" data-v-022997c1><div class="aside" data-v-022997c1><div class="aside-curtain" data-v-022997c1></div><div class="aside-container" data-v-022997c1><div class="aside-content" data-v-022997c1><div class="VPDocAside" data-v-022997c1 data-v-40367621><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-40367621 data-v-b41c5656><div class="content" data-v-b41c5656><div class="outline-marker" data-v-b41c5656></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-b41c5656>On this page</div><ul class="VPDocOutlineItem root" data-v-b41c5656 data-v-2b6a8827><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-40367621></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-022997c1><div class="content-container" data-v-022997c1><!--[--><!--]--><main class="main" data-v-022997c1><div style="position:relative;" class="vp-doc _en_guide_core-commands_" data-v-022997c1><div><h1 id="core-commands" tabindex="-1">Core Commands <a class="header-anchor" href="#core-commands" aria-label="Permalink to &quot;Core Commands&quot;">​</a></h1><h2 id="semo" tabindex="-1"><code>semo</code> <a class="header-anchor" href="#semo" aria-label="Permalink to &quot;`semo`&quot;">​</a></h2><p>Please note that <code>Semo</code> provides a default mechanism to run any file that conforms to the <code>Semo</code> command line file syntax.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo command.js</span></span></code></pre></div><p>Typically, the commands we define don&#39;t include file extensions like <code>.js</code>, so the file is executed directly as a command. If you need to execute a <code>.ts</code> command file style, you&#39;ll need the <code>ts</code> environment, please refer to the FAQ section.</p><p>The significance of this mechanism is that you can use <code>Semo</code> to define and execute script files, which blurs the distinction between commands and scripts. They are interchangeable. Scripts come first, and if you find them frequently used, give them a good name and then encapsulate them into a plugin. In the early days, there was also a <code>semo-plugin-script</code> plugin that aimed to do this. Now with this default mechanism, support for script files can be built into <code>Semo</code>. However, the <code>semo-plugin-script</code> plugin still has a script template code generator feature, which the <code>Semo</code> core does not intend to provide. Because this is more inclined to be understood as a simplified way to develop command-line tools quickly.</p><h2 id="semo-application" tabindex="-1"><code>semo application</code> <a class="header-anchor" href="#semo-application" aria-label="Permalink to &quot;`semo application`&quot;">​</a></h2><blockquote><p>alias: <code>app</code></p></blockquote><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This command has been moved to the <code>semo-plugin-application</code> plugin.</p></div><p>By default, this command has no functionality. Its purpose is to establish a convention with business projects, suggesting that commands added to the business project should be written as subcommands of this command. The reason why a business project can add subcommands to this command is that it utilizes the command extension mechanism of <code>Semo</code>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> semo-plugin-application</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> command</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application/test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --extend=application</span></span></code></pre></div><p>This way, you can add a test command to the project, and this command needs to be called using <code>semo application test</code>.</p><p>By running <code>semo application help</code>, you can see all top-level subcommands defined by the current business project. Since it&#39;s difficult to remember all commands and parameters, especially when a project implements many commands and has multiple levels, the help command is something we often need to execute.</p><h2 id="semo-cleanup" tabindex="-1"><code>semo cleanup</code> <a class="header-anchor" href="#semo-cleanup" aria-label="Permalink to &quot;`semo cleanup`&quot;">​</a></h2><blockquote><p>alias: clean</p></blockquote><p>This command is used to clean up some files generated internally by Semo, including the history of the repl command, shell command history, temporarily downloaded packages in repl, temporarily downloaded packages in the run command, and the global plugin directory.</p><p>Currently, only limited extensions are provided, allowing only the application directory to define cleanup directories. Support for plugins to add cleanup directories is not provided, mainly for security reasons.</p><h2 id="semo-config" tabindex="-1"><code>semo config</code> <a class="header-anchor" href="#semo-config" aria-label="Permalink to &quot;`semo config`&quot;">​</a></h2><p>We can use this core built-in command to view and modify configuration files, operate on the configuration files of the current project, or operate on the global configuration file.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo config &lt;op&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Manage rc config</span></span>
<span class="line"><span></span></span>
<span class="line"><span>命令：</span></span>
<span class="line"><span>  semo config delete &lt;configKey&gt;                                Delete configs by key                     [aliases: del]</span></span>
<span class="line"><span>  semo config get &lt;configKey&gt;                                   Get configs by key</span></span>
<span class="line"><span>  semo config list                                              List configs                   [默认值] [aliases: ls, l]</span></span>
<span class="line"><span>  semo config set &lt;configKey&gt; &lt;configValue&gt; [configComment]     Set config by key</span></span>
<span class="line"><span>  [configType]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Options:</span></span>
<span class="line"><span>  --global, -g  For reading/writing configs from/to global yml rc file, default is false</span></span>
<span class="line"><span>  --watch       Watch config change, maybe only work on Mac</span></span></code></pre></div><p>Note that the <code>&lt;configKey&gt;</code> here is in the format of <code>a.b.c</code>, representing multi-level configuration. In addition, it supports adding comments to the configuration set at the last level.</p><h2 id="semo-hook" tabindex="-1"><code>semo hook</code> <a class="header-anchor" href="#semo-hook" aria-label="Permalink to &quot;`semo hook`&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This command has been moved to the <code>semo-plugin-hook</code> plugin.</p></div><p>The output of this command displays all available hooks in the current environment. All logic implementing these hooks can be executed. In the output, you can see the name, description, and module declaration of the hooks:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Hook                         :  Package :  Description</span></span>
<span class="line"><span>  hook_beforeCommand           :  semo    :  Hook triggered before command execution.</span></span>
<span class="line"><span>  hook_afterCommand            :  semo    :  Hook triggered after command execution.</span></span>
<span class="line"><span>  hook_component               :  semo    :  Hook triggered when needing to fetch component</span></span>
<span class="line"><span>  hook_hook                    :  semo    :  Hook triggered in hook command.</span></span>
<span class="line"><span>  hook_repl                    :  semo    :  Hook triggered in repl command.</span></span>
<span class="line"><span>  hook_status                  :  semo    :  Hook triggered in status command.</span></span>
<span class="line"><span>  hook_create_project_template :  semo    :  Hook triggered in create command.</span></span></code></pre></div><p>Here you can see that there is a special hook called <code>hook_hook</code>. Implementing this hook allows you to declare hooks, and any plugin can declare its own hooks for other commands to call, thereby affecting its own behavior. Generally, business projects do not need to declare their own hooks, unless the business project deeply uses this mechanism to constitute its own business plugin system.</p><p>It is also important to note that even if not declared, hooks can still be used as long as they are implemented. Declaring hooks here is just for transparency. Details on how to declare and implement hooks will be explained in the hooks-related section.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>In the future, it may be possible to change the logic so that hooks that are not declared cannot be used.</p></div><h2 id="semo-init" tabindex="-1"><code>semo init</code> <a class="header-anchor" href="#semo-init" aria-label="Permalink to &quot;`semo init`&quot;">​</a></h2><blockquote><p>alias: <code>i</code></p></blockquote><p>This command is used for initialization and can implement two scenarios: initialization of a business project or initialization of a plugin. The difference between these two scenarios lies in the directory structure.</p><p>In a business project, we default to placing the directory structure of <code>Semo</code> in the <code>bin</code> directory:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>├── .semorc.yml</span></span>
<span class="line"><span>├── bin</span></span>
<span class="line"><span>│   └── semo</span></span>
<span class="line"><span>│       ├── commands</span></span>
<span class="line"><span>│       ├── extends</span></span>
<span class="line"><span>│       ├── hooks</span></span>
<span class="line"><span>│       ├── plugins</span></span>
<span class="line"><span>│       └── scripts</span></span>
<span class="line"><span>└── package.json</span></span></code></pre></div><p>In a plugin project, we put all the code in the <code>src</code> directory:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>├── .semorc.yml</span></span>
<span class="line"><span>├── src</span></span>
<span class="line"><span>│    ├── commands</span></span>
<span class="line"><span>│    ├── extends</span></span>
<span class="line"><span>│    ├── hooks</span></span>
<span class="line"><span>└── package.json</span></span></code></pre></div><p>The existence of this command is only to save a few seconds for engineers. In other words, if you don&#39;t use this command, manually creating these directories and files is also OK.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The structure and usage of <code>.semorc.yml</code> will be explained in the configuration management section.</p></div><p>In addition, if we really want to create a plugin, it is too slow to do it through initialization. Here, it is recommended to use the plugin project template. The specific command is as follows:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo create semo-plugin-xxx --template=plugin</span></span></code></pre></div><p>Clearly, other project templates can also be used here. Regarding the <code>create</code> command, see below for an introduction to the <code>create</code> command.</p><h2 id="semo-create-name-repo-branch" tabindex="-1"><code>semo create &lt;name&gt; [repo] [branch]</code> <a class="header-anchor" href="#semo-create-name-repo-branch" aria-label="Permalink to &quot;`semo create &lt;name&gt; [repo] [branch]`&quot;">​</a></h2><blockquote><p>alias: <code>n</code></p></blockquote><p>This command, unlike <code>generate</code> and <code>init</code>, is used to initialize a new project directory. This project can be a business project or a plugin. This command has many parameters and some conventions:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ semo create help</span></span>
<span class="line"><span></span></span>
<span class="line"><span>semo create &lt;name&gt; [repo] [branch]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Create a create project from specific repo</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Options:</span></span>
<span class="line"><span>  --version      Show version number                                                                           [boolean]</span></span>
<span class="line"><span>  --yarn         use yarn command                                                                        [default: false]</span></span>
<span class="line"><span>  --yes, -y      run npm/yarn init with --yes                                                             [default: true]</span></span>
<span class="line"><span>  --force, -F    force download, existed folder will be deleted!</span></span>
<span class="line"><span>  --merge, -M    merge config with exist project folder!</span></span>
<span class="line"><span>  --empty, -E    force empty project, ignore repo</span></span>
<span class="line"><span>  --template, -T   select from default repos</span></span>
<span class="line"><span>  --add, -A      add npm package to package.json dependencies                                            [default: false]</span></span>
<span class="line"><span>  --add-dev, -D  add npm package to package.json devDependencies                                         [default: false]</span></span>
<span class="line"><span>  --init-semo, -i     init new project</span></span>
<span class="line"><span>  -h, --help     Show help                                                                                     [boolean]</span></span></code></pre></div><p>Single explanations have been provided above, below we&#39;ll explain with specific usage scenarios.</p><h3 id="initialize-from-any-repository" tabindex="-1">Initialize from Any Repository <a class="header-anchor" href="#initialize-from-any-repository" aria-label="Permalink to &quot;Initialize from Any Repository&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo create PROJECT_NAME PROJECT_REPO_URL master -f</span></span></code></pre></div><p>Here we can see that with the create command, we can download code from any git repository address, and any code repository can be our project template. Where <code>master</code> is the branch name, which defaults to <code>master</code> so it can be omitted, <code>-f</code> means if the directory already exists, it will first delete the original one and then recreate it.</p><p>In addition to downloading the code, the create command also removes the original <code>.git</code> directory and reinitializes an empty <code>.git</code> directory, then automatically downloads all project dependencies.</p><h3 id="creating-an-empty-project-not-based-on-any-project-template" tabindex="-1">Creating an Empty Project, Not Based on Any Project Template <a class="header-anchor" href="#creating-an-empty-project-not-based-on-any-project-template" aria-label="Permalink to &quot;Creating an Empty Project, Not Based on Any Project Template&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PROJECT_NAME</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -yfie</span></span></code></pre></div><p>Here we can see a feature of <code>yargs</code>, where short parameters can be chained together. Here, it&#39;s equivalent to <code>-y -f -i -e</code>, which means <code>-y</code> automatically answers <code>yes</code> when creating the <code>package.json</code>, <code>-f</code> forces the deletion of an existing directory, <code>-i</code> automatically executes <code>semo init</code> to initialize the project directory, and <code>-e</code> indicates that it&#39;s an empty project declaration, not based on any code repository or built-in template.</p><p>The directory structure of the project is as follows:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>├── .semorc.yml</span></span>
<span class="line"><span>├── bin</span></span>
<span class="line"><span>│   └── semo</span></span>
<span class="line"><span>│       ├── commands</span></span>
<span class="line"><span>│       ├── extends</span></span>
<span class="line"><span>│       ├── hooks</span></span>
<span class="line"><span>│       ├── plugins</span></span>
<span class="line"><span>│       └── scripts</span></span>
<span class="line"><span>└── package.json</span></span></code></pre></div><h3 id="creating-a-semo-plugin-directory" tabindex="-1">Creating a <code>Semo</code> Plugin Directory <a class="header-anchor" href="#creating-a-semo-plugin-directory" aria-label="Permalink to &quot;Creating a `Semo` Plugin Directory&quot;">​</a></h3><p>If not based on a plugin template, we can manually create a basic plugin structure:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> semo-plugin-[PLUGIN_NAME]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -yfie</span></span></code></pre></div><p>Similar to the previous command, except for the project name. Here, there&#39;s a naming convention for the project name. If the project name starts with <code>semo-plugin-</code>, it&#39;s considered as initializing a <code>Semo</code> plugin, and <code>semo init --plugin</code> will be executed during initialization.</p><p>The directory structure of the project is as follows:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>├── .semorc.yml</span></span>
<span class="line"><span>├── package.json</span></span>
<span class="line"><span>└── src</span></span>
<span class="line"><span>    ├── commands</span></span>
<span class="line"><span>    ├── extends</span></span>
<span class="line"><span>    └── hooks</span></span></code></pre></div><h3 id="creating-a-project-based-on-built-in-templates" tabindex="-1">Creating a Project Based on Built-in Templates <a class="header-anchor" href="#creating-a-project-based-on-built-in-templates" aria-label="Permalink to &quot;Creating a Project Based on Built-in Templates&quot;">​</a></h3><p>If we create a project using the following command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PROJECT_NAME</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --template</span></span></code></pre></div><p>We&#39;ll see the following output:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>? Please choose a pre-defined repo to continue: (Use arrow keys)</span></span>
<span class="line"><span>❯ semo_plugin_starter [semo-plugin-starter, plugin]</span></span>
<span class="line"><span>❯ ...</span></span></code></pre></div><p>Here, we can choose from available built-in templates, eliminating the need to manually input repository addresses. Currently, there&#39;s only one plugin template by default, but additional templates can be injected using the <code>hook_create_project_template</code>:</p><p>Example hook implementation for injecting templates:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> hook_create_project_template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  demo_repo: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    repo: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;demo_repo.git&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    branch: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;master&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    alias: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;demo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>If we already know which template and identifier to use during initialization, we can specify it directly:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PROJECT_NAME</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --template=demo</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PROJECT_NAME</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --template=demo_repo</span></span></code></pre></div><h3 id="tip" tabindex="-1">Tip <a class="header-anchor" href="#tip" aria-label="Permalink to &quot;Tip&quot;">​</a></h3><p>When creating a business project or a plugin, it&#39;s not recommended to start from an empty project because many engineering and technology selection issues need to be considered. It&#39;s recommended to summarize commonly used scaffolding projects within the company and then initialize them using a unified method. For example, after initializing the built-in plugin template, you can directly write logic and then upload the code to <code>Github</code> and execute <code>npm version patch &amp;&amp; npm publish</code> to publish it to the npm repository. Instructions on how to develop a plugin and publish it to the <code>npm</code> repository will be provided separately. Additionally, note that the scaffolding project here can be implemented in any language.</p><p>The remaining options are also straightforward. <code>--yarn</code> declares the use of <code>yarn</code> to initialize and install dependencies, <code>--add</code> and <code>--add-dev</code> are used to specify new dependencies during initialization. <code>--merge</code> means not to delete the original project, but to enter the project directory and then apply <code>--init</code>, <code>--add</code>, <code>--add-dev</code>.</p><h2 id="semo-generate-component" tabindex="-1"><code>semo generate &lt;component&gt;</code> <a class="header-anchor" href="#semo-generate-component" aria-label="Permalink to &quot;`semo generate &lt;component&gt;`&quot;">​</a></h2><blockquote><p>alias: <code>generate</code>, <code>g</code></p></blockquote><p>This command is used for generating component code. Here, the term &quot;component&quot; refers to abstracted and categorized development targets. For example, the <code>Semo</code> core defines three concepts: plugins, commands, and scripts. Therefore, there are corresponding code generation subcommands for these three concepts. Similarly, <code>Semo</code> plugins or integrated projects can create their own abstract concepts and provide corresponding code generators. For instance, backend business projects may have concepts like routes, controllers, models, database migration files, unit tests, etc. These concepts may not be universal across projects but maintaining consistent style within a project is recommended. Generating boilerplate code automatically helps maintain consistency.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">componen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> component</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sample</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> code</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Commands:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> command</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [description]    Generate a command template</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                   Generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> structure</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> script</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                   Generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> script</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Options:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Show</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               [boolean]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -h,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --help</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Show</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                         [boolean]</span></span></code></pre></div><h3 id="extending-the-generate-command-to-add-subcommands" tabindex="-1">Extending the <code>generate</code> Command to Add Subcommands <a class="header-anchor" href="#extending-the-generate-command-to-add-subcommands" aria-label="Permalink to &quot;Extending the `generate` Command to Add Subcommands&quot;">​</a></h3><p>Similar to extending the <code>application</code> command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> command</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate/test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --extend=semo</span></span></code></pre></div><p>The implementation details of these code generation commands are not constrained here because firstly, the built-in template string mechanism in ES6 can solve most problems. Secondly, <code>Semo</code> also incorporates <code>lodash</code>, and its <code>_.template</code> method is quite flexible. Finally, once the template code is assembled, it can be placed wherever desired.</p><p>Since this part is based on <code>Semo</code>, related configurations are suggested to be placed in the <code>.semorc.yml</code> file. For example, the default configuration generated by <code>create</code> command includes:</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">commandDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">src/commands</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">extendDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">src/extends</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hookDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">src/hooks</span></span></code></pre></div><p>As seen, the <code>create</code> command generates default configurations by merely specifying some directories for code auto-generation. It also provides a consistent style for defining other directories if maintaining configuration consistency is desired.</p><h2 id="semo-plugin" tabindex="-1"><code>semo plugin</code> <a class="header-anchor" href="#semo-plugin" aria-label="Permalink to &quot;`semo plugin`&quot;">​</a></h2><blockquote><p>alias: p</p></blockquote><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This command has been moved to the <code>semo-plugin-plugin</code> plugin.</p></div><p>This command is used for managing globally installed plugins in the home directory or for optimizing the execution efficiency of the current project&#39;s <code>semo</code>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Plugin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> management</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tool</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Commands:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">plugi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         [aliases: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">i]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                List</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> all</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       [aliases: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">l,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  semo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> uninstall</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">plugi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Uninstall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       [aliases: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">un]</span></span></code></pre></div><h2 id="semo-repl-replfile" tabindex="-1"><code>semo repl [replFile]</code> <a class="header-anchor" href="#semo-repl-replfile" aria-label="Permalink to &quot;`semo repl [replFile]`&quot;">​</a></h2><blockquote><p>alias: <code>r</code></p></blockquote><p>REPL (read-eval-print-loop): an interactive evaluator, a tool available in most modern programming languages. It allows writing simple code snippets for quick understanding and learning of language features. When REPL is combined with frameworks or business projects, it can have greater utility.</p><h3 id="some-extensions-to-the-repl" tabindex="-1">Some Extensions to the <code>REPL</code> <a class="header-anchor" href="#some-extensions-to-the-repl" aria-label="Permalink to &quot;Some Extensions to the `REPL`&quot;">​</a></h3><p>When developing Semo and this scaffolding, Node&#39;s REPL didn&#39;t support <code>await</code>. Here, it&#39;s simulated to enable triggering execution of promises or generator methods from the project. With this capability, combined with injecting some business logic into <code>REPL</code>, we gain an additional execution mode beyond controllers, scripts, and unit tests, and it&#39;s interactive.</p><h3 id="injecting-new-objects-into-repl" tabindex="-1">Injecting New Objects into <code>REPL</code> <a class="header-anchor" href="#injecting-new-objects-into-repl" aria-label="Permalink to &quot;Injecting New Objects into `REPL`&quot;">​</a></h3><p>Here, the internal <code>hook_repl</code> hook needs to be implemented, and configured in the business project&#39;s hook directory: <code>hookDir</code>. The following code is for reference only:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/hooks/index.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> hook_repl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    multiple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Then, in the REPL environment, it can be used:</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The information returned by <code>hook_repl</code> is injected into the <code>Semo</code> object in the REPL.</p></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&gt;&gt;&gt; add</span></span>
<span class="line"><span>[Function: add]</span></span>
<span class="line"><span>&gt;&gt;&gt; await Semo.add(1, 2)</span></span>
<span class="line"><span>3</span></span>
<span class="line"><span>&gt;&gt;&gt; multiple</span></span>
<span class="line"><span>[Function: multiple]</span></span>
<span class="line"><span>&gt;&gt;&gt; await Semo.multiple(3, 4)</span></span>
<span class="line"><span>12</span></span></code></pre></div><p>In actual business projects, common methods, utility functions, etc., from the project are injected, which is helpful for development and later troubleshooting. By default, <code>Semo</code> injects its own <code>Utils</code> utility object, containing some custom utility functions of <code>Semo</code>, as well as exposing dependencies imported by <code>Semo</code>, such as <code>lodash</code>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>In practical applications, we inject various company infrastructure such as databases, caches, OSS, Consul, ElasticSearch, etc., into the REPL, write them as plugins, and make it easier for us to directly access the infrastructure.</p></div><h3 id="reloading-hook-files" tabindex="-1">Reloading Hook Files <a class="header-anchor" href="#reloading-hook-files" aria-label="Permalink to &quot;Reloading Hook Files&quot;">​</a></h3><p><code>.reload</code> or <code>Semo.reload()</code> can re-execute the <code>hook_repl</code> hook and inject the latest results into Semo. This is useful when we want to call the latest hook results without exiting the REPL environment. It only guarantees the reloading and execution of hook files themselves. If <code>require</code> is used inside the hooks, it will still be cached, which users need to handle themselves, such as attempting to delete <code>require.cache</code> before each <code>require</code>.</p><h3 id="temporarily-trying-npm-packages" tabindex="-1">Temporarily Trying npm Packages <a class="header-anchor" href="#temporarily-trying-npm-packages" aria-label="Permalink to &quot;Temporarily Trying npm Packages&quot;">​</a></h3><p>In the REPL, support is provided to temporarily download and debug packages using <code>Semo.import</code>, without these downloaded debugging packages entering the current project&#39;s <code>node_modules</code> directory. (There&#39;s also an equivalent method: <code>Semo.require</code>)</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&gt;&gt;&gt; let _ = Semo.import(&#39;lodash&#39;)</span></span>
<span class="line"><span>&gt;&gt;&gt; _.VERSION</span></span></code></pre></div><h4 id="using-internal-commands" tabindex="-1">Using Internal Commands <a class="header-anchor" href="#using-internal-commands" aria-label="Permalink to &quot;Using Internal Commands&quot;">​</a></h4><blockquote><p>Added in v1.5.14 <code>.require</code> and <code>.import</code> are equivalent and can be used to quickly import some commonly used packages for debugging. For example:</p></blockquote><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&gt;&gt;&gt; .import lodash:_ dayjs:day</span></span></code></pre></div><p>The part after the colon is the alias, meaning how the imported module will be stored as a variable.</p><h3 id="releasing-object-properties-to-the-repl-environment" tabindex="-1">Releasing Object Properties to the REPL Environment <a class="header-anchor" href="#releasing-object-properties-to-the-repl-environment" aria-label="Permalink to &quot;Releasing Object Properties to the REPL Environment&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&gt;&gt;&gt; Semo.extract(Semo)</span></span></code></pre></div><p>The potential risk of this operation is that it may overwrite built-in objects in the REPL environment. However, the purpose of this API is to release specific objects, such as releasing all table models from an ORM.</p><p>This operation also supports configuration. For example, to inject the <code>Utils</code> from the Semo object, it can be configured in the configuration file:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$plugin:</span></span>
<span class="line"><span>  semo:</span></span>
<span class="line"><span>    extract: Semo</span></span></code></pre></div><p>This method injects all properties under Semo. If only <code>Utils</code> needs to be injected, it can be configured as follows:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$plugin:</span></span>
<span class="line"><span>  semo:</span></span>
<span class="line"><span>    extract:</span></span>
<span class="line"><span>      Semo: [Utils]</span></span></code></pre></div><h3 id="introduction-to-the-semo-object" tabindex="-1">Introduction to the Semo Object <a class="header-anchor" href="#introduction-to-the-semo-object" aria-label="Permalink to &quot;Introduction to the Semo Object&quot;">​</a></h3><p>Initially, it was intended that the core and plugins could be freely injected into the REPL environment. However, due to concerns about control, it was decided that both the core and plugins can only be injected into the <code>Semo</code> object. Below is a brief overview of the structure of the Semo object:</p><ul><li><code>Semo.hooks</code>: To isolate information injected by various plugins, all injected information from plugins is stored here, ensuring that plugins do not interfere with each other.</li><li><code>Semo.argv</code>: Represents the <code>yargs</code> argv parameters entered into the command. Sometimes useful for checking if configuration merging is effective or for experimenting with yargs parameter parsing.</li><li><code>Semo.repl</code>: The current object instance of the REPL environment.</li><li><code>Semo.Utils</code>: Core utility package, containing several custom functions and exposing some commonly used third-party packages such as <code>lodash</code>, <code>chalk</code>, etc.</li><li><code>Semo.reload</code>: Re-executes the <code>hook_repl</code> hook with the latest hook files.</li><li><code>Semo.import</code>: Used for temporary experiments with npm packages. Can be cleaned up using <code>semo cleanup</code>.</li><li><code>Semo.extract</code>: Releases key-value pairs of internal objects into the current scope, serving as a compensation for injecting all hooks into the <code>Semo</code> object.</li></ul><h3 id="methods-automatically-injected-into-the-global-scope" tabindex="-1">Methods Automatically Injected into the Global Scope <a class="header-anchor" href="#methods-automatically-injected-into-the-global-scope" aria-label="Permalink to &quot;Methods Automatically Injected into the Global Scope&quot;">​</a></h3><p>If you find that the default object hierarchy is too deep, you can inject it into the global scope of REPL by configuration or parameters. The method is <code>--extract</code>.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo repl --extract Semo.hooks</span></span></code></pre></div><p>Configuration method: Modify <code>.semorc.yml</code></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$plugin:</span></span>
<span class="line"><span>  semo:</span></span>
<span class="line"><span>    extract: Semo.hooks</span></span></code></pre></div><p>or</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>CommandDefault:</span></span>
<span class="line"><span>  repl:</span></span>
<span class="line"><span>    extract: Semo.hooks</span></span></code></pre></div><h3 id="support-for-executing-a-repl-file" tabindex="-1">Support for Executing a REPL File <a class="header-anchor" href="#support-for-executing-a-repl-file" aria-label="Permalink to &quot;Support for Executing a REPL File&quot;">​</a></h3><p>The purpose is also to execute logic and inject some results into the REPL. The file is also a Node module and needs to adhere to a specified format.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">argv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Or</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">argv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span></code></pre></div><p>It&#39;s worth noting that only through <code>context</code> can injections be made into the REPL. If your code is not within a function, it can still be executed, but it cannot access the content injected into <code>context</code> by previous logic, nor can it obtain the <code>argv</code> object. Additionally, it must be injected into the REPL through the <code>global</code> object.</p><p>What is the purpose of this mechanism? The main purpose is to simplify debugging during development. Some debugging tasks in the REPL may involve many preconditions. Typing them line by line in the REPL can be cumbersome. This approach allows us to solidify debugging logic.</p><p>Another aspect is the <code>semo repl --require</code> mechanism. If set globally, it may be too fixed and not suitable for many cases. Setting via command line requires inputting every time, which is inconvenient. By executing scripts, we can flexibly organize logic, inject commonly used utility libraries, and even make settings before injection, partially replacing the previous <code>--require</code> mechanism and hook mechanism.</p><h2 id="semo-run-plugin-command" tabindex="-1"><code>semo run &lt;PLUGIN&gt; [COMMAND]</code> <a class="header-anchor" href="#semo-run-plugin-command" aria-label="Permalink to &quot;`semo run &lt;PLUGIN&gt; [COMMAND]`&quot;">​</a></h2><p>This command functions similarly to <code>yarn create</code>, allowing for the direct execution of commands from remote plugin packages.</p><p>For example:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo run semo-plugin-serve serve</span></span></code></pre></div><p>Here, the <code>semo-plugin-serve</code> plugin is invoked to create a simple HTTP server. However, to simplify this command, we can omit certain parts.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo run serve</span></span></code></pre></div><p>This is much cleaner. The reason we can omit the <code>semo-plugin-</code> prefix is because this command only supports Semo series plugins, not all npm packages. Therefore, it can be internally appended. Additionally, the <code>serve</code> command is removed because the plugin follows a convention where it exposes a <code>handler</code> method that handles the execution of commands. If a plugin contains multiple commands, only the most commonly used ones are exposed using this mechanism, while others should be explicitly passed as arguments. Furthermore, it&#39;s essential to note that some commands require arguments, which should all be transformed into options.</p><p>Previously, for a command like:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo serve [publicDir]</span></span></code></pre></div><p>When dispatched using the <code>run</code> command, note that command arguments within plugin commands need to be placed after <code>--</code>.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo run serve -- --public-dir=.</span></span></code></pre></div><p>If your npm Semo plugin package is scoped, you need to specify the scope when using <code>run</code>.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo run xxx --SCOPE yyy</span></span></code></pre></div><p>Plugins run by the <code>run</code> command are cached locally, but not in the global plugin directory <code>.semo/node_modules</code>. Instead, they are cached in the <code>.semo/run_plugin_cache/node_modules</code> directory. By default, if the cache exists, the plugin will use it. To update, the <code>--upgrade</code> parameter is used.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo run serve --UPGRADE|--UP</span></span></code></pre></div><p>Some plugins may depend on others. In such cases, dependencies need to be manually specified to ensure they are downloaded together. Why not rely on npm&#39;s dependency mechanism? Consider the following example:</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This feature was introduced in v0.8.2.</p></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo run read READ_URL --format=editor --DEP=read-extend-format-editor</span></span></code></pre></div><p>The <code>editor</code> plugin depends on <code>read</code> during development. However, at runtime, the parameter specified for <code>read</code> is implemented by the <code>editor</code> plugin. Therefore, manual dependency specification is required.</p><p>You may have noticed that all parameters and options of this command are in uppercase. This is to reduce conflicts with other plugins. It&#39;s best to agree that all plugin parameters and options use lowercase.</p><h2 id="semo-script-file" tabindex="-1"><code>semo script [file]</code> <a class="header-anchor" href="#semo-script-file" aria-label="Permalink to &quot;`semo script [file]`&quot;">​</a></h2><blockquote><p>alias: <code>scr</code></p></blockquote><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This command has been moved to the <code>semo-plugin-script</code> plugin.</p></div><p>Often, we need to run scripts outside of project services, such as for data migration, exporting data, batch data modification, or executing business logic like sending emails, SMS, or notifications. When faced with such requirements, we need to write scripts, but encounter several issues:</p><ul><li>Where to place them?</li><li>How to write them?</li><li>How to parse script arguments?</li></ul><p>In many cases, these requirements are one-time or have preconditions, making them unsuitable for commands. Otherwise, there would be too many commands. In such scenarios, <code>Semo</code> provides a unified solution through this command.</p><h3 id="where-to-place-scripts" tabindex="-1">Where to Place Scripts <a class="header-anchor" href="#where-to-place-scripts" aria-label="Permalink to &quot;Where to Place Scripts&quot;">​</a></h3><p>There is a <code>scriptDir</code> configuration in which scripts are stored, defaulting to <code>src/scripts</code>. Since these scripts are not accessible to services, there&#39;s no need to keep them too close to the project&#39;s core logic.</p><h3 id="how-to-write-and-parse-arguments" tabindex="-1">How to Write and Parse Arguments <a class="header-anchor" href="#how-to-write-and-parse-arguments" aria-label="Permalink to &quot;How to Write and Parse Arguments&quot;">​</a></h3><p>Of course, you can manually create scripts and then trigger them using this command. However, scripts need to be named, and there are certain formatting requirements. Therefore, it&#39;s recommended to use the <code>semo generate script</code> command to generate them.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo generate script test</span></span></code></pre></div><p>Automatically generated boilerplate code and filename:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/bin/semo/scripts/20191025130716346_test.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> builder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">yargs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // yargs.option(&#39;option&#39;, {default, describe, alias})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">argv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Start to draw your dream code!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>As a script, instead of immediately writing business logic, or needing to declare a <code>shebang</code> identifier, you only need to define two methods: <code>builder</code> and <code>handler</code>. The <code>builder</code> method is used to declare script parameters, and the format can refer to <code>yargs</code>. If the script doesn&#39;t require parameters, it can be omitted. Since it&#39;s template-generated, it&#39;s placed there for future needs. The <code>handler</code> contains the specific execution logic, with the parsed script parameters passed as arguments, including the project&#39;s <code>.semorc.yml</code> configuration. Note that <code>handler</code> supports <code>async</code>, allowing for asynchronous operations here.</p><p>Therefore, the most significant difference between scripts and commands lies in their frequency of use and business positioning. We often define atomic commands and then orchestrate them in scripts.</p><h2 id="semo-shell" tabindex="-1"><code>semo shell</code> <a class="header-anchor" href="#semo-shell" aria-label="Permalink to &quot;`semo shell`&quot;">​</a></h2><blockquote><p>alias: <code>sh</code></p></blockquote><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This command has been moved to the <code>semo-plugin-shell</code> plugin.</p></div><p>This command is straightforward—it eliminates the need to type <code>semo</code> before every command. For example:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo shell</span></span>
<span class="line"><span>&gt; status</span></span>
<span class="line"><span>&gt; hook</span></span>
<span class="line"><span>&gt; repl</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo shell --prefix=git</span></span>
<span class="line"><span>&gt; log</span></span>
<span class="line"><span>&gt; remote -v</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>semo: prefix=git</span></span>
<span class="line"><span>git: log</span></span></code></pre></div><h2 id="semo-status" tabindex="-1"><code>semo status</code> <a class="header-anchor" href="#semo-status" aria-label="Permalink to &quot;`semo status`&quot;">​</a></h2><blockquote><p>alias: <code>st</code></p></blockquote><p>This command simply displays the environment in which <code>Semo</code> is currently operating. For example:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ semo st</span></span>
<span class="line"><span>  version  :  1.8.17</span></span>
<span class="line"><span>  location :  ~/.nvm/versions/node/[VERSION]/lib/node_modules/semo</span></span>
<span class="line"><span>  os       :  macOS 10.15</span></span>
<span class="line"><span>  node     :  8.16.2</span></span>
<span class="line"><span>  npm      :  6.4.1</span></span>
<span class="line"><span>  yarn     :  1.15.2</span></span>
<span class="line"><span>  hostname :  [MY_HOST]</span></span>
<span class="line"><span>  home     :  [MY_HOME]</span></span>
<span class="line"><span>  shell    :  [MY_SHELL]</span></span></code></pre></div><p>This command implements a hook, <code>hook_status</code>. Plugins implementing this hook can display relevant plugin information here. If a business project implements this hook, it can also display project information.</p><h2 id="semo-completion" tabindex="-1"><code>semo completion</code> <a class="header-anchor" href="#semo-completion" aria-label="Permalink to &quot;`semo completion`&quot;">​</a></h2><p>This command outputs a shell script that, when placed in <code>.bashrc</code> or <code>.zshrc</code>, enables automatic completion of subcommands.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Due to Semo&#39;s poor performance, while this auto-completion can be used, it provides a poor user experience and is not recommended.</p></div></div></div></main><footer class="VPDocFooter" data-v-022997c1 data-v-be322068><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-be322068><span class="visually-hidden" id="doc-footer-aria-label" data-v-be322068>Pager</span><div class="pager" data-v-be322068><a class="VPLink link pager-link prev" href="/en/guide/quickstart/" data-v-be322068><!--[--><span class="desc" data-v-be322068>Previous page</span><span class="title" data-v-be322068>Quick Start</span><!--]--></a></div><div class="pager" data-v-be322068><a class="VPLink link pager-link next" href="/en/guide/config/" data-v-be322068><!--[--><span class="desc" data-v-be322068>Next page</span><span class="title" data-v-be322068>Configuration Management</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-32f6a11a data-v-c63b8b43><div class="container" data-v-c63b8b43><p class="message" data-v-c63b8b43>Enterprise level CLI rules</p><!----></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"community_contrib_index.md\":\"CVsbQLoR\",\"community_qa_index.md\":\"CLIkPjqo\",\"en_community_contrib_index.md\":\"CfOFlnX9\",\"en_community_qa_index.md\":\"4XPi0gpN\",\"en_guide_config_index.md\":\"Cz6GIzXz\",\"en_guide_core-commands_index.md\":\"BLp7JC1y\",\"en_guide_custom-commands_index.md\":\"BM6Up9tT\",\"en_guide_hook_index.md\":\"aQuURQvB\",\"en_guide_index.md\":\"lWPHUP23\",\"en_guide_plugin_index.md\":\"Cxh0p1kj\",\"en_guide_quickstart_index.md\":\"JlhMIF3b\",\"en_index.md\":\"CVXYm4N5\",\"en_usage_distribution_index.md\":\"OT9SQvwW\",\"en_usage_index.md\":\"XuWsNL6S\",\"en_usage_integration_index.md\":\"DWj0TcBc\",\"en_usage_plugin_index.md\":\"BJUyE_K5\",\"en_usage_solution_index.md\":\"D8PF0fbe\",\"guide_config_index.md\":\"C9wgGm28\",\"guide_core-commands_index.md\":\"DaX03CAh\",\"guide_custom-commands_index.md\":\"CiUT8M7r\",\"guide_hook_index.md\":\"KvejDpwh\",\"guide_index.md\":\"COT_59J6\",\"guide_plugin_index.md\":\"DNa--CPa\",\"guide_quickstart_index.md\":\"BxOC4zLo\",\"index.md\":\"CFdDF3tK\",\"usage_distribution_index.md\":\"DeAUh3Ms\",\"usage_index.md\":\"BRVok6QH\",\"usage_integration_index.md\":\"CyOiNTvK\",\"usage_plugin_index.md\":\"CPyjDpux\",\"usage_solution_index.md\":\"Dq7C8mQW\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Semo\",\"description\":\"一个命令行工具\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"search\":{\"provider\":\"local\"}},\"locales\":{\"root\":{\"label\":\"中文\",\"lang\":\"zh\",\"link\":\"/\",\"themeConfig\":{\"footer\":{\"message\":\"企业级Node项目命令行体系建设规范\"},\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"指南\",\"link\":\"/guide/\"},{\"text\":\"用法\",\"link\":\"/usage/\"},{\"text\":\"参考\",\"link\":\"http://semo.js.org/typedoc/\"}],\"sidebar\":[{\"text\":\"基础\",\"collapsed\":false,\"items\":[{\"text\":\"介绍\",\"link\":\"/guide/\"},{\"text\":\"快速上手\",\"link\":\"/guide/quickstart/\"},{\"text\":\"核心命令\",\"link\":\"/guide/core-commands/\"},{\"text\":\"自定义命令\",\"link\":\"/guide/custom-commands/\"},{\"text\":\"配置管理\",\"link\":\"/guide/config/\"},{\"text\":\"钩子机制\",\"link\":\"/guide/hook/\"},{\"text\":\"插件开发\",\"link\":\"/guide/plugin/\"}]},{\"text\":\"用法\",\"collapsed\":false,\"items\":[{\"text\":\"概述\",\"link\":\"/usage/\"},{\"text\":\"插件\",\"link\":\"/usage/plugin/\"},{\"text\":\"项目整合\",\"link\":\"/usage/integration/\"},{\"text\":\"解决方案\",\"link\":\"/usage/solution/\"},{\"text\":\"发行版\",\"link\":\"/usage/distribution/\"}]},{\"text\":\"社区\",\"collapsed\":false,\"items\":[{\"text\":\"如何贡献\",\"link\":\"/community/contrib/\"},{\"text\":\"常见问题\",\"link\":\"/community/qa/\"}]}]}},\"en\":{\"label\":\"English\",\"lang\":\"en\",\"link\":\"/en/\",\"themeConfig\":{\"footer\":{\"message\":\"Enterprise level CLI rules\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/en/\"},{\"text\":\"Guide\",\"link\":\"/en/guide/\"},{\"text\":\"Usage\",\"link\":\"/en/usage/\"},{\"text\":\"Reference\",\"link\":\"http://semo.js.org/typedoc/\"}],\"sidebar\":[{\"text\":\"Guide\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/en/guide/\"},{\"text\":\"Quick Start\",\"link\":\"/en/guide/quickstart/\"},{\"text\":\"Core Commands\",\"link\":\"/en/guide/core-commands/\"},{\"text\":\"Custom Commands\",\"link\":\"/en/guide/core-commands/\"},{\"text\":\"Configuration Management\",\"link\":\"/en/guide/config/\"},{\"text\":\"Hook Mechanism\",\"link\":\"/en/guide/hook/\"},{\"text\":\"Plugin Development\",\"link\":\"/en/guide/plugin/\"}]},{\"text\":\"Usage\",\"collapsed\":false,\"items\":[{\"text\":\"Overview\",\"link\":\"/en/usage/\"},{\"text\":\"Plugins\",\"link\":\"/en/usage/plugin/\"},{\"text\":\"Project Integration\",\"link\":\"/en/usage/integration/\"},{\"text\":\"Solutions\",\"link\":\"/en/usage/solution/\"},{\"text\":\"Distribution\",\"link\":\"/en/usage/distribution/\"}]},{\"text\":\"Community\",\"collapsed\":false,\"items\":[{\"text\":\"How to Contribute\",\"link\":\"/en/community/contrib/\"},{\"text\":\"Frequently Asked Questions\",\"link\":\"/en/community/qa/\"}]}]}}},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>
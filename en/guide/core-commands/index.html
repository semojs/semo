<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Core Commands | Semo</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="A Node.js CLI building rules.">
    
    <link rel="preload" href="/assets/css/0.styles.acc2b136.css" as="style"><link rel="preload" href="/assets/js/app.1c3f0d45.js" as="script"><link rel="preload" href="/assets/js/2.ba92cd9d.js" as="script"><link rel="preload" href="/assets/js/1.c0f27cf5.js" as="script"><link rel="preload" href="/assets/js/30.5ccab1d6.js" as="script"><link rel="prefetch" href="/assets/js/10.65819d39.js"><link rel="prefetch" href="/assets/js/11.39b543d7.js"><link rel="prefetch" href="/assets/js/12.03a05adf.js"><link rel="prefetch" href="/assets/js/13.ffc8bc69.js"><link rel="prefetch" href="/assets/js/14.67e6dbaa.js"><link rel="prefetch" href="/assets/js/15.52c1aed2.js"><link rel="prefetch" href="/assets/js/16.e0e89472.js"><link rel="prefetch" href="/assets/js/17.cda121ba.js"><link rel="prefetch" href="/assets/js/18.61c28edc.js"><link rel="prefetch" href="/assets/js/19.f58dfaa3.js"><link rel="prefetch" href="/assets/js/20.18b644bb.js"><link rel="prefetch" href="/assets/js/21.3b665101.js"><link rel="prefetch" href="/assets/js/22.9c8168b6.js"><link rel="prefetch" href="/assets/js/23.9f9f475a.js"><link rel="prefetch" href="/assets/js/24.3528886c.js"><link rel="prefetch" href="/assets/js/25.694039a0.js"><link rel="prefetch" href="/assets/js/26.dc762a2f.js"><link rel="prefetch" href="/assets/js/27.2f1ce92f.js"><link rel="prefetch" href="/assets/js/28.40e180e1.js"><link rel="prefetch" href="/assets/js/29.3a61faf7.js"><link rel="prefetch" href="/assets/js/3.5443cc84.js"><link rel="prefetch" href="/assets/js/31.63537216.js"><link rel="prefetch" href="/assets/js/32.be59bb9b.js"><link rel="prefetch" href="/assets/js/33.372ad170.js"><link rel="prefetch" href="/assets/js/34.28a1467e.js"><link rel="prefetch" href="/assets/js/35.957d39a7.js"><link rel="prefetch" href="/assets/js/36.7b26797c.js"><link rel="prefetch" href="/assets/js/37.64eda9c6.js"><link rel="prefetch" href="/assets/js/38.552b9752.js"><link rel="prefetch" href="/assets/js/39.2e95795f.js"><link rel="prefetch" href="/assets/js/4.bf4516f2.js"><link rel="prefetch" href="/assets/js/40.220bcf70.js"><link rel="prefetch" href="/assets/js/41.1b54d9a1.js"><link rel="prefetch" href="/assets/js/42.64e4abd4.js"><link rel="prefetch" href="/assets/js/43.e405d5a4.js"><link rel="prefetch" href="/assets/js/44.4b7b61b3.js"><link rel="prefetch" href="/assets/js/45.b62ceb4b.js"><link rel="prefetch" href="/assets/js/46.9b2cdf33.js"><link rel="prefetch" href="/assets/js/47.a5264e5d.js"><link rel="prefetch" href="/assets/js/48.db61019b.js"><link rel="prefetch" href="/assets/js/49.49e6540b.js"><link rel="prefetch" href="/assets/js/5.4554aff1.js"><link rel="prefetch" href="/assets/js/50.e73c1873.js"><link rel="prefetch" href="/assets/js/51.5f5e6bff.js"><link rel="prefetch" href="/assets/js/6.f72b5c66.js"><link rel="prefetch" href="/assets/js/7.48b067b9.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.77260563.js">
    <link rel="stylesheet" href="/assets/css/0.styles.acc2b136.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><!----> <span class="site-name">Semo</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/en/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/en/usage/" class="nav-link">
  Usage
</a></div><div class="nav-item"><a href="http://semo.js.org/typedoc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Reference
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/core-commands/" class="nav-link">
  zh-CN
</a></li><li class="dropdown-item"><!----> <a href="/en/guide/core-commands/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  en-US
</a></li></ul></div></div> <a href="https://github.com/semojs/semo" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/en/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/en/usage/" class="nav-link">
  Usage
</a></div><div class="nav-item"><a href="http://semo.js.org/typedoc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Reference
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/core-commands/" class="nav-link">
  zh-CN
</a></li><li class="dropdown-item"><!----> <a href="/en/guide/core-commands/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  en-US
</a></li></ul></div></div> <a href="https://github.com/semojs/semo" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/en/guide/quickstart/" class="sidebar-link">Quick Start</a></li><li><a href="/en/guide/core-commands/" aria-current="page" class="active sidebar-link">Core Commands</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo" class="sidebar-link">semo</a></li><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo-application" class="sidebar-link">semo application</a></li><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo-cleanup" class="sidebar-link">semo cleanup</a></li><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo-config" class="sidebar-link">semo config</a></li><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo-hook" class="sidebar-link">semo hook</a></li><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo-init" class="sidebar-link">semo init</a></li><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo-create-name-repo-branch" class="sidebar-link">semo create  [repo] [branch]</a></li><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo-generate-component" class="sidebar-link">semo generate &lt;component&gt;</a></li><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo-plugin" class="sidebar-link">semo plugin</a></li><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo-repl-replfile" class="sidebar-link">semo repl [replFile]</a></li><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo-run-plugin-command" class="sidebar-link">semo run  [COMMAND]</a></li><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo-script-file" class="sidebar-link">semo script [file]</a></li><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo-shell" class="sidebar-link">semo shell</a></li><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo-status" class="sidebar-link">semo status</a></li><li class="sidebar-sub-header"><a href="/en/guide/core-commands/#semo-completion" class="sidebar-link">semo completion</a></li></ul></li><li><a href="/en/guide/custom-commands/" class="sidebar-link">Custom Commands</a></li><li><a href="/en/guide/config/" class="sidebar-link">Configuration Management</a></li><li><a href="/en/guide/hook/" class="sidebar-link">Hook Mechanism</a></li><li><a href="/en/guide/plugin/" class="sidebar-link">Plugin Development</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Usage</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/usage/" class="sidebar-link">Overview</a></li><li><a href="/en/usage/plugin/" class="sidebar-link">Plugins</a></li><li><a href="/en/usage/integration/" class="sidebar-link">Project Integration</a></li><li><a href="/en/usage/solution/" class="sidebar-link">Solutions</a></li><li><a href="/en/usage/distribution/" class="sidebar-link">Distribution</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Community</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/community/contrib/" class="sidebar-link">How to Contribute</a></li><li><a href="/en/community/qa/" class="sidebar-link">Frequently Asked Questions</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="core-commands"><a href="#core-commands" class="header-anchor">#</a> Core Commands</h1> <h2 id="semo"><a href="#semo" class="header-anchor">#</a> <code>semo</code></h2> <p>Please note that <code>Semo</code> provides a default mechanism to run any file that conforms to the <code>Semo</code> command line file syntax.</p> <div class="language- extra-class"><pre class="language-text"><code>semo command.js
</code></pre></div><p>Typically, the commands we define don't include file extensions like <code>.js</code>, so the file is executed directly as a command. If you need to execute a <code>.ts</code> command file style, you'll need the <code>ts</code> environment, please refer to the FAQ section.</p> <p>The significance of this mechanism is that you can use <code>Semo</code> to define and execute script files, which blurs the distinction between commands and scripts. They are interchangeable. Scripts come first, and if you find them frequently used, give them a good name and then encapsulate them into a plugin. In the early days, there was also a <code>semo-plugin-script</code> plugin that aimed to do this. Now with this default mechanism, support for script files can be built into <code>Semo</code>. However, the <code>semo-plugin-script</code> plugin still has a script template code generator feature, which the <code>Semo</code> core does not intend to provide. Because this is more inclined to be understood as a simplified way to develop command-line tools quickly.</p> <h2 id="semo-application"><a href="#semo-application" class="header-anchor">#</a> <code>semo application</code></h2> <blockquote><p>alias: <code>app</code></p></blockquote> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>This command has been moved to the <code>semo-plugin-application</code> plugin.</p></div> <p>By default, this command has no functionality. Its purpose is to establish a convention with business projects, suggesting that commands added to the business project should be written as subcommands of this command. The reason why a business project can add subcommands to this command is that it utilizes the command extension mechanism of <code>Semo</code>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> semo-plugin-application
semo generate <span class="token builtin class-name">command</span> application/test <span class="token parameter variable">--extend</span><span class="token operator">=</span>application
</code></pre></div><p>This way, you can add a test command to the project, and this command needs to be called using <code>semo application test</code>.</p> <p>By running <code>semo application help</code>, you can see all top-level subcommands defined by the current business project. Since it's difficult to remember all commands and parameters, especially when a project implements many commands and has multiple levels, the help command is something we often need to execute.</p> <h2 id="semo-cleanup"><a href="#semo-cleanup" class="header-anchor">#</a> <code>semo cleanup</code></h2> <blockquote><p>alias: clean</p></blockquote> <p>This command is used to clean up some files generated internally by Semo, including the history of the repl command, shell command history, temporarily downloaded packages in repl, temporarily downloaded packages in the run command, and the global plugin directory.</p> <p>Currently, only limited extensions are provided, allowing only the application directory to define cleanup directories. Support for plugins to add cleanup directories is not provided, mainly for security reasons.</p> <h2 id="semo-config"><a href="#semo-config" class="header-anchor">#</a> <code>semo config</code></h2> <p>We can use this core built-in command to view and modify configuration files, operate on the configuration files of the current project, or operate on the global configuration file.</p> <div class="language- extra-class"><pre class="language-text"><code>semo config &lt;op&gt;

Manage rc config

命令：
  semo config delete &lt;configKey&gt;                                Delete configs by key                     [aliases: del]
  semo config get &lt;configKey&gt;                                   Get configs by key
  semo config list                                              List configs                   [默认值] [aliases: ls, l]
  semo config set &lt;configKey&gt; &lt;configValue&gt; [configComment]     Set config by key
  [configType]

Options:
  --global, -g  For reading/writing configs from/to global yml rc file, default is false
  --watch       Watch config change, maybe only work on Mac
</code></pre></div><p>Note that the <code>&lt;configKey&gt;</code> here is in the format of <code>a.b.c</code>, representing multi-level configuration. In addition, it supports adding comments to the configuration set at the last level.</p> <h2 id="semo-hook"><a href="#semo-hook" class="header-anchor">#</a> <code>semo hook</code></h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>This command has been moved to the <code>semo-plugin-hook</code> plugin.</p></div> <p>The output of this command displays all available hooks in the current environment. All logic implementing these hooks can be executed. In the output, you can see the name, description, and module declaration of the hooks:</p> <div class="language- extra-class"><pre class="language-text"><code>Hook                         :  Package :  Description
  hook_beforeCommand           :  semo    :  Hook triggered before command execution.
  hook_afterCommand            :  semo    :  Hook triggered after command execution.
  hook_component               :  semo    :  Hook triggered when needing to fetch component
  hook_hook                    :  semo    :  Hook triggered in hook command.
  hook_repl                    :  semo    :  Hook triggered in repl command.
  hook_status                  :  semo    :  Hook triggered in status command.
  hook_create_project_template :  semo    :  Hook triggered in create command.
</code></pre></div><p>Here you can see that there is a special hook called <code>hook_hook</code>. Implementing this hook allows you to declare hooks, and any plugin can declare its own hooks for other commands to call, thereby affecting its own behavior. Generally, business projects do not need to declare their own hooks, unless the business project deeply uses this mechanism to constitute its own business plugin system.</p> <p>It is also important to note that even if not declared, hooks can still be used as long as they are implemented. Declaring hooks here is just for transparency. Details on how to declare and implement hooks will be explained in the hooks-related section.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>In the future, it may be possible to change the logic so that hooks that are not declared cannot be used.</p></div> <h2 id="semo-init"><a href="#semo-init" class="header-anchor">#</a> <code>semo init</code></h2> <blockquote><p>alias: <code>i</code></p></blockquote> <p>This command is used for initialization and can implement two scenarios: initialization of a business project or initialization of a plugin. The difference between these two scenarios lies in the directory structure.</p> <p>In a business project, we default to placing the directory structure of <code>Semo</code> in the <code>bin</code> directory:</p> <div class="language- extra-class"><pre class="language-text"><code>├── .semorc.yml
├── bin
│   └── semo
│       ├── commands
│       ├── extends
│       ├── hooks
│       ├── plugins
│       └── scripts
└── package.json

</code></pre></div><p>In a plugin project, we put all the code in the <code>src</code> directory:</p> <div class="language- extra-class"><pre class="language-text"><code>├── .semorc.yml
├── src
│    ├── commands
│    ├── extends
│    ├── hooks
└── package.json
</code></pre></div><p>The existence of this command is only to save a few seconds for engineers. In other words, if you don't use this command, manually creating these directories and files is also OK.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The structure and usage of <code>.semorc.yml</code> will be explained in the configuration management section.</p></div> <p>In addition, if we really want to create a plugin, it is too slow to do it through initialization. Here, it is recommended to use the plugin project template. The specific command is as follows:</p> <div class="language- extra-class"><pre class="language-text"><code>semo create semo-plugin-xxx --template=plugin
</code></pre></div><p>Clearly, other project templates can also be used here. Regarding the <code>create</code> command, see below for an introduction to the <code>create</code> command.</p> <h2 id="semo-create-name-repo-branch"><a href="#semo-create-name-repo-branch" class="header-anchor">#</a> <code>semo create &lt;name&gt; [repo] [branch]</code></h2> <blockquote><p>alias: <code>n</code></p></blockquote> <p>This command, unlike <code>generate</code> and <code>init</code>, is used to initialize a new project directory. This project can be a business project or a plugin. This command has many parameters and some conventions:</p> <div class="language- extra-class"><pre class="language-text"><code>$ semo create help

semo create &lt;name&gt; [repo] [branch]

Create a create project from specific repo

Options:
  --version      Show version number                                                                           [boolean]
  --yarn         use yarn command                                                                        [default: false]
  --yes, -y      run npm/yarn init with --yes                                                             [default: true]
  --force, -F    force download, existed folder will be deleted!
  --merge, -M    merge config with exist project folder!
  --empty, -E    force empty project, ignore repo
  --template, -T   select from default repos
  --add, -A      add npm package to package.json dependencies                                            [default: false]
  --add-dev, -D  add npm package to package.json devDependencies                                         [default: false]
  --init-semo, -i     init new project
  -h, --help     Show help                                                                                     [boolean]
</code></pre></div><p>Single explanations have been provided above, below we'll explain with specific usage scenarios.</p> <h3 id="initialize-from-any-repository"><a href="#initialize-from-any-repository" class="header-anchor">#</a> Initialize from Any Repository</h3> <div class="language- extra-class"><pre class="language-text"><code>semo create PROJECT_NAME PROJECT_REPO_URL master -f
</code></pre></div><p>Here we can see that with the create command, we can download code from any git repository address, and any code repository can be our project template. Where <code>master</code> is the branch name, which defaults to <code>master</code> so it can be omitted, <code>-f</code> means if the directory already exists, it will first delete the original one and then recreate it.</p> <p>In addition to downloading the code, the create command also removes the original <code>.git</code> directory and reinitializes an empty <code>.git</code> directory, then automatically downloads all project dependencies.</p> <h3 id="creating-an-empty-project-not-based-on-any-project-template"><a href="#creating-an-empty-project-not-based-on-any-project-template" class="header-anchor">#</a> Creating an Empty Project, Not Based on Any Project Template</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>semo create PROJECT_NAME <span class="token parameter variable">-yfie</span>
</code></pre></div><p>Here we can see a feature of <code>yargs</code>, where short parameters can be chained together. Here, it's equivalent to <code>-y -f -i -e</code>, which means <code>-y</code> automatically answers <code>yes</code> when creating the <code>package.json</code>, <code>-f</code> forces the deletion of an existing directory, <code>-i</code> automatically executes <code>semo init</code> to initialize the project directory, and <code>-e</code> indicates that it's an empty project declaration, not based on any code repository or built-in template.</p> <p>The directory structure of the project is as follows:</p> <div class="language- extra-class"><pre class="language-text"><code>├── .semorc.yml
├── bin
│   └── semo
│       ├── commands
│       ├── extends
│       ├── hooks
│       ├── plugins
│       └── scripts
└── package.json
</code></pre></div><h3 id="creating-a-semo-plugin-directory"><a href="#creating-a-semo-plugin-directory" class="header-anchor">#</a> Creating a <code>Semo</code> Plugin Directory</h3> <p>If not based on a plugin template, we can manually create a basic plugin structure:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>semo create semo-plugin-<span class="token punctuation">[</span>PLUGIN_NAME<span class="token punctuation">]</span> <span class="token parameter variable">-yfie</span>
</code></pre></div><p>Similar to the previous command, except for the project name. Here, there's a naming convention for the project name. If the project name starts with <code>semo-plugin-</code>, it's considered as initializing a <code>Semo</code> plugin, and <code>semo init --plugin</code> will be executed during initialization.</p> <p>The directory structure of the project is as follows:</p> <div class="language- extra-class"><pre class="language-text"><code>├── .semorc.yml
├── package.json
└── src
    ├── commands
    ├── extends
    └── hooks
</code></pre></div><h3 id="creating-a-project-based-on-built-in-templates"><a href="#creating-a-project-based-on-built-in-templates" class="header-anchor">#</a> Creating a Project Based on Built-in Templates</h3> <p>If we create a project using the following command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>semo create PROJECT_NAME <span class="token parameter variable">--template</span>
</code></pre></div><p>We'll see the following output:</p> <div class="language- extra-class"><pre class="language-text"><code>? Please choose a pre-defined repo to continue: (Use arrow keys)
❯ semo_plugin_starter [semo-plugin-starter, plugin]
❯ ...
</code></pre></div><p>Here, we can choose from available built-in templates, eliminating the need to manually input repository addresses. Currently, there's only one plugin template by default, but additional templates can be injected using the <code>hook_create_project_template</code>:</p> <p>Example hook implementation for injecting templates:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> hook_create_project_template <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">demo_repo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">repo</span><span class="token operator">:</span> <span class="token string">'demo_repo.git'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">branch</span><span class="token operator">:</span> <span class="token string">'master'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'demo'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If we already know which template and identifier to use during initialization, we can specify it directly:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>semo create PROJECT_NAME <span class="token parameter variable">--template</span><span class="token operator">=</span>demo
semo create PROJECT_NAME <span class="token parameter variable">--template</span><span class="token operator">=</span>demo_repo
</code></pre></div><h3 id="tip"><a href="#tip" class="header-anchor">#</a> Tip</h3> <p>When creating a business project or a plugin, it's not recommended to start from an empty project because many engineering and technology selection issues need to be considered. It's recommended to summarize commonly used scaffolding projects within the company and then initialize them using a unified method. For example, after initializing the built-in plugin template, you can directly write logic and then upload the code to <code>Github</code> and execute <code>npm version patch &amp;&amp; npm publish</code> to publish it to the npm repository. Instructions on how to develop a plugin and publish it to the <code>npm</code> repository will be provided separately. Additionally, note that the scaffolding project here can be implemented in any language.</p> <p>The remaining options are also straightforward. <code>--yarn</code> declares the use of <code>yarn</code> to initialize and install dependencies, <code>--add</code> and <code>--add-dev</code> are used to specify new dependencies during initialization. <code>--merge</code> means not to delete the original project, but to enter the project directory and then apply <code>--init</code>, <code>--add</code>, <code>--add-dev</code>.</p> <h2 id="semo-generate-component"><a href="#semo-generate-component" class="header-anchor">#</a> <code>semo generate &lt;component&gt;</code></h2> <blockquote><p>alias: <code>generate</code>, <code>g</code></p></blockquote> <p>This command is used for generating component code. Here, the term &quot;component&quot; refers to abstracted and categorized development targets. For example, the <code>Semo</code> core defines three concepts: plugins, commands, and scripts. Therefore, there are corresponding code generation subcommands for these three concepts. Similarly, <code>Semo</code> plugins or integrated projects can create their own abstract concepts and provide corresponding code generators. For instance, backend business projects may have concepts like routes, controllers, models, database migration files, unit tests, etc. These concepts may not be universal across projects but maintaining consistent style within a project is recommended. Generating boilerplate code automatically helps maintain consistency.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ semo generate <span class="token builtin class-name">help</span>

semo generate <span class="token operator">&lt;</span>component<span class="token operator">&gt;</span>

Generate component sample code

Commands:
  semo generate <span class="token builtin class-name">command</span> <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> <span class="token punctuation">[</span>description<span class="token punctuation">]</span>    Generate a <span class="token builtin class-name">command</span> template
  semo generate plugin <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>                   Generate a plugin structure
  semo generate script <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>                   Generate a script <span class="token function">file</span>

Options:
  <span class="token parameter variable">--version</span>   Show version number               <span class="token punctuation">[</span>boolean<span class="token punctuation">]</span>
  -h, <span class="token parameter variable">--help</span>  Show <span class="token builtin class-name">help</span>                         <span class="token punctuation">[</span>boolean<span class="token punctuation">]</span>
</code></pre></div><h3 id="extending-the-generate-command-to-add-subcommands"><a href="#extending-the-generate-command-to-add-subcommands" class="header-anchor">#</a> Extending the <code>generate</code> Command to Add Subcommands</h3> <p>Similar to extending the <code>application</code> command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>semo generate <span class="token builtin class-name">command</span> generate/test <span class="token parameter variable">--extend</span><span class="token operator">=</span>semo
</code></pre></div><p>The implementation details of these code generation commands are not constrained here because firstly, the built-in template string mechanism in ES6 can solve most problems. Secondly, <code>Semo</code> also incorporates <code>lodash</code>, and its <code>_.template</code> method is quite flexible. Finally, once the template code is assembled, it can be placed wherever desired.</p> <p>Since this part is based on <code>Semo</code>, related configurations are suggested to be placed in the <code>.semorc.yml</code> file. For example, the default configuration generated by <code>create</code> command includes:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">commandDir</span><span class="token punctuation">:</span> src/commands
<span class="token key atrule">extendDir</span><span class="token punctuation">:</span> src/extends
<span class="token key atrule">hookDir</span><span class="token punctuation">:</span> src/hooks
</code></pre></div><p>As seen, the <code>create</code> command generates default configurations by merely specifying some directories for code auto-generation. It also provides a consistent style for defining other directories if maintaining configuration consistency is desired.</p> <h2 id="semo-plugin"><a href="#semo-plugin" class="header-anchor">#</a> <code>semo plugin</code></h2> <blockquote><p>alias: p</p></blockquote> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>This command has been moved to the <code>semo-plugin-plugin</code> plugin.</p></div> <p>This command is used for managing globally installed plugins in the home directory or for optimizing the execution efficiency of the current project's <code>semo</code>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ semo plugin <span class="token builtin class-name">help</span>
semo plugin

Plugin management tool

Commands:
  semo p <span class="token function">install</span> <span class="token operator">&lt;</span>plugin<span class="token operator">&gt;</span>    Install plugin         <span class="token punctuation">[</span>aliases: i<span class="token punctuation">]</span>
  semo p list                List all plugins       <span class="token punctuation">[</span>aliases: l, ls<span class="token punctuation">]</span>
  semo p uninstall <span class="token operator">&lt;</span>plugin<span class="token operator">&gt;</span>  Uninstall plugin       <span class="token punctuation">[</span>aliases: un<span class="token punctuation">]</span>
</code></pre></div><h2 id="semo-repl-replfile"><a href="#semo-repl-replfile" class="header-anchor">#</a> <code>semo repl [replFile]</code></h2> <blockquote><p>alias: <code>r</code></p></blockquote> <p>REPL (read-eval-print-loop): an interactive evaluator, a tool available in most modern programming languages. It allows writing simple code snippets for quick understanding and learning of language features. When REPL is combined with frameworks or business projects, it can have greater utility.</p> <h3 id="some-extensions-to-the-repl"><a href="#some-extensions-to-the-repl" class="header-anchor">#</a> Some Extensions to the <code>REPL</code></h3> <p>When developing Semo and this scaffolding, Node's REPL didn't support <code>await</code>. Here, it's simulated to enable triggering execution of promises or generator methods from the project. With this capability, combined with injecting some business logic into <code>REPL</code>, we gain an additional execution mode beyond controllers, scripts, and unit tests, and it's interactive.</p> <h3 id="injecting-new-objects-into-repl"><a href="#injecting-new-objects-into-repl" class="header-anchor">#</a> Injecting New Objects into <code>REPL</code></h3> <p>Here, the internal <code>hook_repl</code> hook needs to be implemented, and configured in the business project's hook directory: <code>hookDir</code>. The following code is for reference only:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/hooks/index.ts</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">hook_repl</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> a <span class="token operator">+</span> b
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">multiple</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> a <span class="token operator">*</span> b
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then, in the REPL environment, it can be used:</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The information returned by <code>hook_repl</code> is injected into the <code>Semo</code> object in the REPL.</p></div> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; add
[Function: add]
&gt;&gt;&gt; await Semo.add(1, 2)
3
&gt;&gt;&gt; multiple
[Function: multiple]
&gt;&gt;&gt; await Semo.multiple(3, 4)
12
</code></pre></div><p>In actual business projects, common methods, utility functions, etc., from the project are injected, which is helpful for development and later troubleshooting. By default, <code>Semo</code> injects its own <code>Utils</code> utility object, containing some custom utility functions of <code>Semo</code>, as well as exposing dependencies imported by <code>Semo</code>, such as <code>lodash</code>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>In practical applications, we inject various company infrastructure such as databases, caches, OSS, Consul, ElasticSearch, etc., into the REPL, write them as plugins, and make it easier for us to directly access the infrastructure.</p></div> <h3 id="reloading-hook-files"><a href="#reloading-hook-files" class="header-anchor">#</a> Reloading Hook Files</h3> <p><code>.reload</code> or <code>Semo.reload()</code> can re-execute the <code>hook_repl</code> hook and inject the latest results into Semo. This is useful when we want to call the latest hook results without exiting the REPL environment. It only guarantees the reloading and execution of hook files themselves. If <code>require</code> is used inside the hooks, it will still be cached, which users need to handle themselves, such as attempting to delete <code>require.cache</code> before each <code>require</code>.</p> <h3 id="temporarily-trying-npm-packages"><a href="#temporarily-trying-npm-packages" class="header-anchor">#</a> Temporarily Trying npm Packages</h3> <p>In the REPL, support is provided to temporarily download and debug packages using <code>Semo.import</code>, without these downloaded debugging packages entering the current project's <code>node_modules</code> directory. (There's also an equivalent method: <code>Semo.require</code>)</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; let _ = Semo.import('lodash')
&gt;&gt;&gt; _.VERSION
</code></pre></div><h4 id="using-internal-commands"><a href="#using-internal-commands" class="header-anchor">#</a> Using Internal Commands</h4> <blockquote><p>Added in v1.5.14
<code>.require</code> and <code>.import</code> are equivalent and can be used to quickly import some commonly used packages for debugging. For example:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; .import lodash:_ dayjs:day
</code></pre></div><p>The part after the colon is the alias, meaning how the imported module will be stored as a variable.</p> <h3 id="releasing-object-properties-to-the-repl-environment"><a href="#releasing-object-properties-to-the-repl-environment" class="header-anchor">#</a> Releasing Object Properties to the REPL Environment</h3> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; Semo.extract(Semo)
</code></pre></div><p>The potential risk of this operation is that it may overwrite built-in objects in the REPL environment. However, the purpose of this API is to release specific objects, such as releasing all table models from an ORM.</p> <p>This operation also supports configuration. For example, to inject the <code>Utils</code> from the Semo object, it can be configured in the configuration file:</p> <div class="language- extra-class"><pre class="language-text"><code>$plugin:
  semo:
    extract: Semo
</code></pre></div><p>This method injects all properties under Semo. If only <code>Utils</code> needs to be injected, it can be configured as follows:</p> <div class="language- extra-class"><pre class="language-text"><code>$plugin:
  semo:
    extract:
      Semo: [Utils]
</code></pre></div><h3 id="introduction-to-the-semo-object"><a href="#introduction-to-the-semo-object" class="header-anchor">#</a> Introduction to the Semo Object</h3> <p>Initially, it was intended that the core and plugins could be freely injected into the REPL environment. However, due to concerns about control, it was decided that both the core and plugins can only be injected into the <code>Semo</code> object. Below is a brief overview of the structure of the Semo object:</p> <ul><li><code>Semo.hooks</code>: To isolate information injected by various plugins, all injected information from plugins is stored here, ensuring that plugins do not interfere with each other.</li> <li><code>Semo.argv</code>: Represents the <code>yargs</code> argv parameters entered into the command. Sometimes useful for checking if configuration merging is effective or for experimenting with yargs parameter parsing.</li> <li><code>Semo.repl</code>: The current object instance of the REPL environment.</li> <li><code>Semo.Utils</code>: Core utility package, containing several custom functions and exposing some commonly used third-party packages such as <code>lodash</code>, <code>chalk</code>, etc.</li> <li><code>Semo.reload</code>: Re-executes the <code>hook_repl</code> hook with the latest hook files.</li> <li><code>Semo.import</code>: Used for temporary experiments with npm packages. Can be cleaned up using <code>semo cleanup</code>.</li> <li><code>Semo.extract</code>: Releases key-value pairs of internal objects into the current scope, serving as a compensation for injecting all hooks into the <code>Semo</code> object.</li></ul> <h3 id="methods-automatically-injected-into-the-global-scope"><a href="#methods-automatically-injected-into-the-global-scope" class="header-anchor">#</a> Methods Automatically Injected into the Global Scope</h3> <p>If you find that the default object hierarchy is too deep, you can inject it into the global scope of REPL by configuration or parameters. The method is <code>--extract</code>.</p> <div class="language- extra-class"><pre class="language-text"><code>semo repl --extract Semo.hooks
</code></pre></div><p>Configuration method: Modify <code>.semorc.yml</code></p> <div class="language- extra-class"><pre class="language-text"><code>$plugin:
  semo:
    extract: Semo.hooks
</code></pre></div><p>or</p> <div class="language- extra-class"><pre class="language-text"><code>CommandDefault:
  repl:
    extract: Semo.hooks
</code></pre></div><h3 id="support-for-executing-a-repl-file"><a href="#support-for-executing-a-repl-file" class="header-anchor">#</a> Support for Executing a REPL File</h3> <p>The purpose is also to execute logic and inject some results into the REPL. The file is also a Node module and needs to adhere to a specified format.</p> <div class="language-js extra-class"><pre class="language-js"><code>exports<span class="token punctuation">.</span><span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">argv<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// Or</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">argv<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>It's worth noting that only through <code>context</code> can injections be made into the REPL. If your code is not within a function, it can still be executed, but it cannot access the content injected into <code>context</code> by previous logic, nor can it obtain the <code>argv</code> object. Additionally, it must be injected into the REPL through the <code>global</code> object.</p> <p>What is the purpose of this mechanism? The main purpose is to simplify debugging during development. Some debugging tasks in the REPL may involve many preconditions. Typing them line by line in the REPL can be cumbersome. This approach allows us to solidify debugging logic.</p> <p>Another aspect is the <code>semo repl --require</code> mechanism. If set globally, it may be too fixed and not suitable for many cases. Setting via command line requires inputting every time, which is inconvenient. By executing scripts, we can flexibly organize logic, inject commonly used utility libraries, and even make settings before injection, partially replacing the previous <code>--require</code> mechanism and hook mechanism.</p> <h2 id="semo-run-plugin-command"><a href="#semo-run-plugin-command" class="header-anchor">#</a> <code>semo run &lt;PLUGIN&gt; [COMMAND]</code></h2> <p>This command functions similarly to <code>yarn create</code>, allowing for the direct execution of commands from remote plugin packages.</p> <p>For example:</p> <div class="language- extra-class"><pre class="language-text"><code>semo run semo-plugin-serve serve
</code></pre></div><p>Here, the <code>semo-plugin-serve</code> plugin is invoked to create a simple HTTP server. However, to simplify this command, we can omit certain parts.</p> <div class="language- extra-class"><pre class="language-text"><code>semo run serve
</code></pre></div><p>This is much cleaner. The reason we can omit the <code>semo-plugin-</code> prefix is because this command only supports Semo series plugins, not all npm packages. Therefore, it can be internally appended. Additionally, the <code>serve</code> command is removed because the plugin follows a convention where it exposes a <code>handler</code> method that handles the execution of commands. If a plugin contains multiple commands, only the most commonly used ones are exposed using this mechanism, while others should be explicitly passed as arguments. Furthermore, it's essential to note that some commands require arguments, which should all be transformed into options.</p> <p>Previously, for a command like:</p> <div class="language- extra-class"><pre class="language-text"><code>semo serve [publicDir]
</code></pre></div><p>When dispatched using the <code>run</code> command, note that command arguments within plugin commands need to be placed after <code>--</code>.</p> <div class="language- extra-class"><pre class="language-text"><code>semo run serve -- --public-dir=.
</code></pre></div><p>If your npm Semo plugin package is scoped, you need to specify the scope when using <code>run</code>.</p> <div class="language- extra-class"><pre class="language-text"><code>semo run xxx --SCOPE yyy
</code></pre></div><p>Plugins run by the <code>run</code> command are cached locally, but not in the global plugin directory <code>.semo/node_modules</code>. Instead, they are cached in the <code>.semo/run_plugin_cache/node_modules</code> directory. By default, if the cache exists, the plugin will use it. To update, the <code>--upgrade</code> parameter is used.</p> <div class="language- extra-class"><pre class="language-text"><code>semo run serve --UPGRADE|--UP
</code></pre></div><p>Some plugins may depend on others. In such cases, dependencies need to be manually specified to ensure they are downloaded together. Why not rely on npm's dependency mechanism? Consider the following example:</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>This feature was introduced in v0.8.2.</p></div> <div class="language- extra-class"><pre class="language-text"><code>semo run read READ_URL --format=editor --DEP=read-extend-format-editor
</code></pre></div><p>The <code>editor</code> plugin depends on <code>read</code> during development. However, at runtime, the parameter specified for <code>read</code> is implemented by the <code>editor</code> plugin. Therefore, manual dependency specification is required.</p> <p>You may have noticed that all parameters and options of this command are in uppercase. This is to reduce conflicts with other plugins. It's best to agree that all plugin parameters and options use lowercase.</p> <h2 id="semo-script-file"><a href="#semo-script-file" class="header-anchor">#</a> <code>semo script [file]</code></h2> <blockquote><p>alias: <code>scr</code></p></blockquote> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>This command has been moved to the <code>semo-plugin-script</code> plugin.</p></div> <p>Often, we need to run scripts outside of project services, such as for data migration, exporting data, batch data modification, or executing business logic like sending emails, SMS, or notifications. When faced with such requirements, we need to write scripts, but encounter several issues:</p> <ul><li>Where to place them?</li> <li>How to write them?</li> <li>How to parse script arguments?</li></ul> <p>In many cases, these requirements are one-time or have preconditions, making them unsuitable for commands. Otherwise, there would be too many commands. In such scenarios, <code>Semo</code> provides a unified solution through this command.</p> <h3 id="where-to-place-scripts"><a href="#where-to-place-scripts" class="header-anchor">#</a> Where to Place Scripts</h3> <p>There is a <code>scriptDir</code> configuration in which scripts are stored, defaulting to <code>src/scripts</code>. Since these scripts are not accessible to services, there's no need to keep them too close to the project's core logic.</p> <h3 id="how-to-write-and-parse-arguments"><a href="#how-to-write-and-parse-arguments" class="header-anchor">#</a> How to Write and Parse Arguments</h3> <p>Of course, you can manually create scripts and then trigger them using this command. However, scripts need to be named, and there are certain formatting requirements. Therefore, it's recommended to use the <code>semo generate script</code> command to generate them.</p> <div class="language- extra-class"><pre class="language-text"><code>semo generate script test
</code></pre></div><p>Automatically generated boilerplate code and filename:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/bin/semo/scripts/20191025130716346_test.ts</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">builder</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">yargs</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// yargs.option('option', {default, describe, alias})</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">argv</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Start to draw your dream code!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>As a script, instead of immediately writing business logic, or needing to declare a <code>shebang</code> identifier, you only need to define two methods: <code>builder</code> and <code>handler</code>. The <code>builder</code> method is used to declare script parameters, and the format can refer to <code>yargs</code>. If the script doesn't require parameters, it can be omitted. Since it's template-generated, it's placed there for future needs. The <code>handler</code> contains the specific execution logic, with the parsed script parameters passed as arguments, including the project's <code>.semorc.yml</code> configuration. Note that <code>handler</code> supports <code>async</code>, allowing for asynchronous operations here.</p> <p>Therefore, the most significant difference between scripts and commands lies in their frequency of use and business positioning. We often define atomic commands and then orchestrate them in scripts.</p> <h2 id="semo-shell"><a href="#semo-shell" class="header-anchor">#</a> <code>semo shell</code></h2> <blockquote><p>alias: <code>sh</code></p></blockquote> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>This command has been moved to the <code>semo-plugin-shell</code> plugin.</p></div> <p>This command is straightforward—it eliminates the need to type <code>semo</code> before every command. For example:</p> <div class="language- extra-class"><pre class="language-text"><code>semo shell
&gt; status
&gt; hook
&gt; repl
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>semo shell --prefix=git
&gt; log
&gt; remote -v
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>semo: prefix=git
git: log
</code></pre></div><h2 id="semo-status"><a href="#semo-status" class="header-anchor">#</a> <code>semo status</code></h2> <blockquote><p>alias: <code>st</code></p></blockquote> <p>This command simply displays the environment in which <code>Semo</code> is currently operating. For example:</p> <div class="language- extra-class"><pre class="language-text"><code>$ semo st
  version  :  1.8.17
  location :  ~/.nvm/versions/node/[VERSION]/lib/node_modules/semo
  os       :  macOS 10.15
  node     :  8.16.2
  npm      :  6.4.1
  yarn     :  1.15.2
  hostname :  [MY_HOST]
  home     :  [MY_HOME]
  shell    :  [MY_SHELL]
</code></pre></div><p>This command implements a hook, <code>hook_status</code>. Plugins implementing this hook can display relevant plugin information here. If a business project implements this hook, it can also display project information.</p> <h2 id="semo-completion"><a href="#semo-completion" class="header-anchor">#</a> <code>semo completion</code></h2> <p>This command outputs a shell script that, when placed in <code>.bashrc</code> or <code>.zshrc</code>, enables automatic completion of subcommands.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Due to Semo's poor performance, while this auto-completion can be used, it provides a poor user experience and is not recommended.</p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/semojs/semo/edit/master/docs/en/guide/core-commands/README.md" target="_blank" rel="noopener noreferrer">Help improve this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/guide/quickstart/" class="prev">
        Quick Start
      </a></span> <span class="next"><a href="/en/guide/custom-commands/">
        Custom Commands
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1c3f0d45.js" defer></script><script src="/assets/js/2.ba92cd9d.js" defer></script><script src="/assets/js/1.c0f27cf5.js" defer></script><script src="/assets/js/30.5ccab1d6.js" defer></script>
  </body>
</html>
